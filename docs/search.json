[
  {
    "objectID": "index.html#overview",
    "href": "index.html#overview",
    "title": "",
    "section": "Overview",
    "text": "Overview\nThis report provides a reproducible pipeline for processing and analyzing the microdata on nutritional status monitoring in Brazil from the Brazilian Food and Nutrition Surveillance System (SISVAN), focusing on the nutritional status of children aged 0–5 years (i.e., younger than 60 months).\nIf you are working with other age groups, you will need to adapt the code accordingly. We provide some guidance on how to do this along the report.\nFor instructions on how to run the pipeline, see the repository README.\nClick here to see a report with a longitudinal analysis of the processed data."
  },
  {
    "objectID": "index.html#problem",
    "href": "index.html#problem",
    "title": "",
    "section": "Problem",
    "text": "Problem\nThe Food and Nutrition Surveillance System (SISVAN) is a strategic tool for monitoring the nutritional status of the Brazilian population, particularly those served by Brazil’s Unified Health System (SUS). However, despite its broad scope and importance, the anthropometric data recorded in SISVAN often suffer from accessability and quality issues that limit their usefulness for rigorous analyses and evidence-based policymaking (Silva et al., 2023).\nMultiple factors contribute to these quality concerns, including the lack of standardized measurement protocols, variability in staff training, inconsistencies in data entry and processing, and incomplete population coverage (Bagni & Barros, 2015; Corsi et al., 2017; Perumal et al., 2020). To assess and improve data quality, several indicators have been proposed and applied, such as population coverage (Mourão et al., 2020; Nascimento et al., 2017), completeness of birth dates and anthropometric measurements (Finaret & Hutchinson, 2018; Nannan et al., 2019), digit preference for age, height, and weight (Bopp & Faeh, 2008; Lyons-Amos & Stones, 2017), the percentage of biologically implausible values (Lawman et al., 2015), and the dispersion and distribution of standardized weight and height measurements (Mei, 2007; Perumal et al., 2020).\nIn light of these challenges, there is a need for an open and reproducible pipeline to process SISVAN microdata. Such a pipeline should facilitate broader access to the data and systematically identify, correct, and remove problematic records, thereby improving the consistency, completeness, and plausibility of the information for research and policymaking."
  },
  {
    "objectID": "index.html#data-availability",
    "href": "index.html#data-availability",
    "title": "",
    "section": "Data Availability",
    "text": "Data Availability\n\n\n\nThe processed data are available in csv, rds, and parquet formats via a dedicated repository on the Open Science Framework (OSF), accessible here. Each dataset is accompanied by a metadata file describing its structure and contents.\nYou can also retrieve these files directly from R using the osfr package."
  },
  {
    "objectID": "index.html#methods",
    "href": "index.html#methods",
    "title": "",
    "section": "Methods",
    "text": "Methods\nSource of Data\nThe data used in this report come from the following sources:\n\nBrazilian Food and Nutrition Surveillance System (SISVAN):\n\nMicrodata on nutritional status monitoring in Brazil (Sistema de Vigilância Alimentar e Nutricional et al., n.d.), the primary dataset for this pipeline.\n\n\nBrazilian Institute of Geography and Statistics (IBGE):\n\nOfficial codes and metadata for Brazilian municipalities, incorporated via the geobr R package (Pereira & Goncalves, n.d.), used to normalize IBGE municipality codes and enrich the analysis with geographic information.\n\n\nDepartment of Informatics of the Brazilian Unified Health System (DATASUS):\n\nAnnual population estimates by municipality, age, and sex for Brazil (Comitê de Gestão de Indicadores et al., n.d.), used to calculate SISVAN’s population coverage.\n\n\n\nThe DATASUS population estimates used in this pipeline are processed through a separate reproducible workflow, available here (Vartanian & Carvalho, 2025).\nData Munging\nThe data munging follow the data science workflow outlined by Wickham et al. (2023), as illustrated in Figure 1. All processes were made using the Quarto publishing system, along with the AWK (Aho et al., 2023) and R (R Core Team, n.d.) programming languages, supported by several R packages.\nFor data manipulation and workflow, priority was given to packages from the tidyverse, rOpenSci and r-spatial ecosystems, as well as other packages adhering to the tidy tools manifesto (Wickham, 2023).\n\n\nFigure 1: Data science workflow created by Wickham, Çetinkaya-Runde, and Grolemund.\n\n\nSource: Reproduced from Wickham et al. (2023).\n\n\n\nData Validation\n\n\n\n\n\n\nThe validation steps described below are specifically designed for children aged 0–5 years. If you are working with older children or adolescents (ages 5–19 years), you should adapt the code accordingly. For these age groups, we recommend using the WHO’s anthroplus R package (Dirk Schumacher, n.d.-b).\n\n\n\nDifferent validation techniques were used to ensure data quality and reliability:\n\nDuplicate records were removed based on unique combinations of the SISVAN identifier (id) and assessment date (date). Only the latest record for each individual on a given date was retained.\nWeight and height measurements identified as biologically implausible values (BIVs) according to World Health Organization (WHO) child growth standards (World Health Organization, 2006, 2008) were set to missing. BIVs were detected by calculating z-scores using the anthro_zscores function from the WHO anthro R package (Dirk Schumacher, n.d.-a), based on weight, height, age, and sex. Implausible values were flagged when z-scores exceeded established WHO cutoffs (typically \\(|z| &gt; 5\\)). For details, see the function documentation.\n\nData Categorization\nNutritional status categories are ideally determined using z-scores, as recommended by the WHO child growth standards (World Health Organization, 2006, Section C). However, SISVAN data report age only in years, rather than in days or months as required for accurate z-score calculation. This limitation introduces substantial classification error if z-scores are computed directly. Therefore, we use the nutritional status categories already provided in the SISVAN microdata and set these categories to missing when biologically implausible values (BIVs) were identified.\nCode Style\nThe Tidyverse Tidy Tools Manifesto (Wickham, 2023), code style guide (Wickham, n.d.-a) and design principles (Wickham, n.d.-b) were followed to ensure consistency and enhance readability.\nReproducibility\nThe pipeline is fully reproducible and can be run again at any time. To ensure consistent results, the renv package (Ushey & Wickham, n.d.) is used to manage and restore the R environment. See the README file in the code repository to learn how to run it."
  },
  {
    "objectID": "index.html#set-environment",
    "href": "index.html#set-environment",
    "title": "",
    "section": "Set Environment",
    "text": "Set Environment\nLoad Packages\n\nlibrary(anthro)\nlibrary(brandr)\nlibrary(cli)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(fs)\nlibrary(geobr)\nlibrary(ggplot2)\nlibrary(ggspatial)\nlibrary(groomr) # github.com/danielvartan/groomr\nlibrary(here)\nlibrary(htmltools)\nlibrary(httr2)\nlibrary(janitor)\nlibrary(knitr)\nlibrary(labelled)\nlibrary(lubridate)\nlibrary(nanoparquet)\nlibrary(orbis) # github.com/danielvartan/orbis\nlibrary(osfr)\nlibrary(pal) # gitlab.com/rpkg.dev/pal\nlibrary(parallel)\nlibrary(quartabs)\nlibrary(readr)\nlibrary(rutils) # github.com/danielvartan/rutils\nlibrary(scales)\nlibrary(sf)\nlibrary(stringr)\nlibrary(tidyr)\nlibrary(utils)\nlibrary(vroom)\nlibrary(zip)\n\nSet Data Directories\n\nraw_data_dir &lt;- here(\"data-raw\")\ndata_dir &lt;- here(\"data\")\n\n\nfor (i in c(raw_data_dir, data_dir)) {\n  if (!dir_exists(i)) dir_create(i, recurse = TRUE)\n}\n\nSet Initial Variables\n\n\n\n\n\n\nThe year variable represent the year of the consolidated SISVAN dataset on nutritional status.\n\n\n\n\nyear &lt;- 2023\n\n\n\n\n\n\n\nThe age_limits variable define the age range (in years) of individuals to be included in the analysis.\n\n\n\n\nage_limits &lt;- c(0, 4) # == Less than 5 years\n\n\n\n\n\n\n\nThe col_selection variable specifies the columns to be imported from the raw SISVAN microdata files.\nClick here to access the microdata data dictionary (in Portuguese).\n\n\n\n\ncol_selection &lt;- c(\n  \"CO_PESSOA_SISVAN\",\n  \"DT_ACOMPANHAMENTO\",\n  \"CO_MUNICIPIO_IBGE\",\n  \"CO_CNES\",\n  \"SG_SEXO\",\n  \"NU_IDADE_ANO\",\n  \"CO_RACA_COR\",\n  \"NU_PESO\",\n  \"NU_ALTURA\",\n  \"PESO X IDADE\",\n  \"PESO X ALTURA\",\n  \"CRI. ALTURA X IDADE\",\n  \"CRI. IMC X IDADE\"\n)"
  },
  {
    "objectID": "index.html#download-and-import-ibge-municipalities-data",
    "href": "index.html#download-and-import-ibge-municipalities-data",
    "title": "",
    "section": "Download and Import IBGE Municipalities Data",
    "text": "Download and Import IBGE Municipalities Data\n\n\n\n\n\n\nSee the Source of Data section for more information.\n\n\n\n\nmunicipalities_data &lt;- brazil_municipality(year = year)\n#&gt; ! The closest map year to 2023 is 2022. Using year 2022 instead.\n#&gt; Using year/date 2022\n\n\nmunicipalities_data |&gt; glimpse()\n#&gt; Rows: 5,570\n#&gt; Columns: 9\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ state             &lt;chr&gt; \"Rondônia\", \"Rondônia\", \"Rondônia\", \"Rondônia\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ municipality      &lt;chr&gt; \"Alta Floresta D'Oeste\", \"Ariquemes\", \"Cabixi\", \"…\n#&gt; $ latitude          &lt;dbl&gt; -11.935540305, -9.908462867, -13.499763460, -11.4…\n#&gt; $ longitude         &lt;dbl&gt; -61.99982390, -63.03326928, -60.54431358, -61.442…"
  },
  {
    "objectID": "index.html#download-datasus-population-estimates",
    "href": "index.html#download-datasus-population-estimates",
    "title": "",
    "section": "Download DATASUS Population Estimates",
    "text": "Download DATASUS Population Estimates\n\n\n\n\n\n\nSee the Source of Data section for more information.\n\n\n\nList Files\n\ndatasus_file_pattern &lt;-\n  \"datasus-population-estimates-\" |&gt;\n  paste0(year)\n\n\ndatasus_file &lt;-\n  raw_data_dir |&gt;\n  here(paste0(datasus_file_pattern, \".rds\"))\n\n\nosf_raw_data_id &lt;- \"h3pyd\"\n\n\nosf_raw_data_file &lt;-\n  osf_raw_data_id |&gt;\n  osf_retrieve_node() |&gt;\n  osf_ls_files(\n    type = \"file\",\n    pattern = paste0(year, \".rds\")\n  ) |&gt;\n  filter(str_detect(name, paste0(\"^\", year, \"\\\\.rds$\")))\n\n\nosf_raw_data_file\n\n\n  \n\n\n\nDownload Data\n\nosf_raw_data_file |&gt;\n  osf_download(\n    path = raw_data_dir,\n    conflicts = \"overwrite\"\n  ) |&gt;\n  pull(local_path)\n#&gt; [1] \"data-raw/2023.rds\"\n\nRename File\n\nif (file_exists(datasus_file)) {\n  datasus_file |&gt; file_delete()\n}\n\n\nraw_data_dir |&gt;\n  dir_ls(\n    type = \"file\",\n    regexp = paste0(year, \"\\\\.rds$\")\n  ) |&gt;\n  file_move(datasus_file)"
  },
  {
    "objectID": "index.html#import-datasus-population-estimates",
    "href": "index.html#import-datasus-population-estimates",
    "title": "",
    "section": "Import DATASUS Population Estimates",
    "text": "Import DATASUS Population Estimates\n\npopulation_estimates_data &lt;- datasus_file |&gt; read_rds()\n\n\npopulation_estimates_data |&gt; glimpse()\n#&gt; Rows: 902,340\n#&gt; Columns: 5\n#&gt; $ year              &lt;int&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n#&gt; $ municipality_code &lt;int&gt; 1100015, 1100015, 1100015, 1100015, 1100015, 1100…\n#&gt; $ sex               &lt;fct&gt; male, male, male, male, male, male, male, male, m…\n#&gt; $ age               &lt;int&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,…\n#&gt; $ population        &lt;int&gt; 171, 170, 170, 172, 178, 178, 173, 175, 179, 178,…"
  },
  {
    "objectID": "index.html#download-sisvan-microdata-on-nutritional-status",
    "href": "index.html#download-sisvan-microdata-on-nutritional-status",
    "title": "",
    "section": "Download SISVAN Microdata on Nutritional Status",
    "text": "Download SISVAN Microdata on Nutritional Status\n\n\n\n\n\n\nSee the Source of Data section for more information.\n\n\n\n\n\n\n\n\n\nThe microdata files are very large. For practical reasons, some code chunks have eval: false set to prevent downloading the data each time the report is rendered. When running the pipeline in a loop or for full automation, remove these lines to enable automatic downloading.\n\n\n\nDownload Data\n\nfile &lt;-\n  \"sisvan_estado_nutricional_\" |&gt;\n  paste0(year, \".zip\")\n\n\n\"https://s3.sa-east-1.amazonaws.com/ckan.saude.gov.br\" |&gt;\n  path(\n    \"SISVAN\",\n    \"estado_nutricional\",\n    file\n  ) |&gt;\n  request() |&gt;\n  req_progress() |&gt;\n  req_perform(here(raw_data_dir, file))\n\nUnzip Data\n\nhere(raw_data_dir, file) |&gt;\n  unzip(exdir = raw_data_dir)\n\nDelete Zip Files\n\nraw_data_dir |&gt;\n  dir_ls(type = \"file\", regexp = \"\\\\.zip$\") |&gt;\n  file_delete()\n\nCheck Data Dimensions\n\nfile &lt;- file |&gt; str_replace(\"\\\\.zip$\", \"\\\\.csv\")\n\n\nraw_data_dir |&gt;\n  here(file) |&gt;\n  peek_csv_file(\n    delim = \";\",\n    skip = 0,\n    has_header = TRUE\n  )\n#&gt; The file has 34 columns, 53,981,528 rows, and 1,835,371,952 cells."
  },
  {
    "objectID": "index.html#import-and-filter-data",
    "href": "index.html#import-and-filter-data",
    "title": "",
    "section": "Import and Filter Data",
    "text": "Import and Filter Data\n\n\n\n\n\n\nThe vroom R package together with the AWK programming language were use to efficiently handle large datasets and mitigate memory issues. This approach allows the pipeline to run locally on most machines, though we recommend a minimum of 12 GB of RAM for optimal performance. Alternatively, the pipeline can also be executed on cloud platforms such as Google Colab and RStudio Cloud, or using GitHub Actions large runners.\n\n\n\nDefine Column Names and Schema\n\ncol_names &lt;- c(\n  \"CO_ACOMPANHAMENTO\",\n  \"CO_PESSOA_SISVAN\",\n  \"ST_PARTICIPA_ANDI\",\n  \"CO_MUNICIPIO_IBGE\",\n  \"SG_UF\",\n  \"NO_MUNICIPIO\",\n  \"CO_CNES\",\n  \"NU_IDADE_ANO\",\n  \"NU_FASE_VIDA\",\n  \"DS_FASE_VIDA\",\n  \"SG_SEXO\",\n  \"CO_RACA_COR\",\n  \"DS_RACA_COR\",\n  \"CO_POVO_COMUNIDADE\",\n  \"DS_POVO_COMUNIDADE\",\n  \"CO_ESCOLARIDADE\",\n  \"DS_ESCOLARIDADE\",\n  \"DT_ACOMPANHAMENTO\",\n  \"NU_COMPETENCIA\",\n  \"NU_PESO\",\n  \"NU_ALTURA\",\n  \"DS_IMC\",\n  \"DS_IMC_PRE_GESTACIONAL\",\n  \"PESO X IDADE\",\n  \"PESO X ALTURA\",\n  \"CRI. ALTURA X IDADE\",\n  \"CRI. IMC X IDADE\",\n  \"ADO. ALTURA X IDADE\",\n  \"ADO. IMC X IDADE\",\n  \"CO_ESTADO_NUTRI_ADULTO\",\n  \"CO_ESTADO_NUTRI_IDOSO\",\n  \"CO_ESTADO_NUTRI_IMC_SEMGEST\",\n  \"CO_SISTEMA_ORIGEM_ACOMP\",\n  \"SISTEMA_ORIGEM_ACOMP\"\n)\n\n\nschema &lt;- cols(\n  \"CO_ACOMPANHAMENTO\" = col_character(),\n  \"CO_PESSOA_SISVAN\" = col_character(),\n  \"ST_PARTICIPA_ANDI\" = col_character(),\n  \"CO_MUNICIPIO_IBGE\" = col_integer(),\n  \"SG_UF\" = col_factor(),\n  \"NO_MUNICIPIO\" = col_character(),\n  \"CO_CNES\" = col_integer(),\n  \"NU_IDADE_ANO\" = col_integer(),\n  \"NU_FASE_VIDA\" = col_character(), # decimal mark = \".\" (double)\n  \"DS_FASE_VIDA\" = col_factor(),\n  \"SG_SEXO\" = col_factor(),\n  \"CO_RACA_COR\" = col_character(),\n  \"DS_RACA_COR\" = col_factor(),\n  \"CO_POVO_COMUNIDADE\" = col_integer(),\n  \"DS_POVO_COMUNIDADE\" = col_factor(),\n  \"CO_ESCOLARIDADE\" = col_character(),\n  \"DS_ESCOLARIDADE\" = col_factor(),\n  \"DT_ACOMPANHAMENTO\" = col_date(),\n  \"NU_COMPETENCIA\" = col_integer(),\n  \"NU_PESO\" = col_double(),\n  \"NU_ALTURA\" = col_integer(),\n  \"DS_IMC\" = col_double(),\n  \"DS_IMC_PRE_GESTACIONAL\" = col_character(), # decimal mark = \".\" (double)\n  \"PESO X IDADE\" = col_factor(),\n  \"PESO X ALTURA\" = col_factor(),\n  \"CRI. ALTURA X IDADE\" = col_factor(),\n  \"CRI. IMC X IDADE\" = col_factor(),\n  \"ADO. ALTURA X IDADE\" = col_factor(),\n  \"ADO. IMC X IDADE\" = col_factor(),\n  \"CO_ESTADO_NUTRI_ADULTO\" = col_factor(),\n  \"CO_ESTADO_NUTRI_IDOSO\" = col_factor(),\n  \"CO_ESTADO_NUTRI_IMC_SEMGEST\" = col_factor(),\n  \"CO_SISTEMA_ORIGEM_ACOMP\" = col_integer(),\n  \"SISTEMA_ORIGEM_ACOMP\" = col_factor()\n)\n\nImport and Filter Data\n\n\n\n\n\n\nYou may see warning messages about failed parsing. These warnings are expected due to minor inconsistencies in the SISVAN raw data and do not affect the overall analysis.\n\n\n\n\ndata &lt;-\n  vroom(\n    file = pipe(\n      paste0(\n        \"awk \",\n        \"-F \", # Field separator\n        \"';' \",\n        \"'{\", # Program\n        \"if (\",\n        \"($8 &gt;= \",\n        age_limits[1],\n        \")\",\n        \" && \",\n        \"($8 &lt;= \",\n        age_limits[2],\n        \")\",\n        \") \",\n        \"{print}\",\n        \"}' \",\n        raw_data_dir |&gt; here(file) # file\n      )\n    ),\n    delim = \";\",\n    col_names = col_names,\n    col_types = schema,\n    col_select = all_of(col_selection),\n    na = c(\"\", \"NA\"),\n    locale = locale(\n      date_names = \"pt\",\n      date_format = \"%d/%m/%Y\",\n      time_format = \"%H:%M:%S\",\n      decimal_mark = \",\",\n      grouping_mark = \".\",\n      tz = \"America/Sao_Paulo\",\n      encoding = raw_data_dir |&gt;\n        here(file) |&gt;\n        guess_encoding() |&gt;\n        extract2(\"encoding\") |&gt;\n        magrittr::extract(1)\n    ),\n    guess_max = 100,\n    num_threads = detectCores() |&gt;\n      multiply_by(0.75) |&gt;\n      floor(),\n    progress = TRUE\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 7,290,143\n#&gt; Columns: 13\n#&gt; $ CO_PESSOA_SISVAN      &lt;chr&gt; \"E58A0CFF79CFFAE2F4CCFB27996BAE3546A498DD\", \"…\n#&gt; $ DT_ACOMPANHAMENTO     &lt;date&gt; 2023-01-09, 2023-01-05, 2023-01-04, 2023-01-…\n#&gt; $ CO_MUNICIPIO_IBGE     &lt;int&gt; 150295, 431720, 351960, 521040, 353890, 42029…\n#&gt; $ CO_CNES               &lt;int&gt; 2312670, 2254549, 373885, 2382482, 7260431, 7…\n#&gt; $ SG_SEXO               &lt;fct&gt; M, M, M, F, F, F, M, M, M, F, F, F, F, M, F, …\n#&gt; $ NU_IDADE_ANO          &lt;int&gt; 0, 0, 2, 4, 1, 0, 2, 3, 2, 0, 1, 4, 0, 1, 3, …\n#&gt; $ CO_RACA_COR           &lt;chr&gt; \"01\", \"01\", \"02\", \"04\", \"01\", \"99\", \"01\", \"03…\n#&gt; $ NU_PESO               &lt;dbl&gt; 9.710, 4.000, 11.900, 34.000, 9.500, 7.639, 1…\n#&gt; $ NU_ALTURA             &lt;int&gt; 74, 50, 87, 110, 75, 70, 85, 108, 95, NA, 90,…\n#&gt; $ `PESO X IDADE`        &lt;fct&gt; Peso adequado para idade, Baixo peso para a i…\n#&gt; $ `PESO X ALTURA`       &lt;fct&gt; Peso Adequado ou Eutrofico, Risco de sobrepes…\n#&gt; $ `CRI. ALTURA X IDADE` &lt;fct&gt; Estatura adequada para a idade, Muito baixa e…\n#&gt; $ `CRI. IMC X IDADE`    &lt;fct&gt; Eutrofia, Eutrofia, Eutrofia, Obesidade, Eutr…"
  },
  {
    "objectID": "index.html#tidy-data",
    "href": "index.html#tidy-data",
    "title": "",
    "section": "Tidy Data",
    "text": "Tidy Data\nRename Columns\n\ndata &lt;-\n  data |&gt;\n  clean_names() |&gt;\n  rename(\n    id = co_pessoa_sisvan,\n    date = dt_acompanhamento,\n    municipality_code = co_municipio_ibge,\n    cnes = co_cnes,\n    sex = sg_sexo,\n    age = nu_idade_ano,\n    ethnicity = co_raca_cor,\n    weight = nu_peso,\n    height = nu_altura,\n    weight_for_age = peso_x_idade,\n    weight_for_height = peso_x_altura,\n    height_for_age = cri_altura_x_idade,\n    bmi_for_age = cri_imc_x_idade\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 7,290,143\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"E58A0CFF79CFFAE2F4CCFB27996BAE3546A498DD\", \"097B…\n#&gt; $ date              &lt;date&gt; 2023-01-09, 2023-01-05, 2023-01-04, 2023-01-04, …\n#&gt; $ municipality_code &lt;int&gt; 150295, 431720, 351960, 521040, 353890, 420290, 4…\n#&gt; $ cnes              &lt;int&gt; 2312670, 2254549, 373885, 2382482, 7260431, 75694…\n#&gt; $ sex               &lt;fct&gt; M, M, M, F, F, F, M, M, M, F, F, F, F, M, F, M, M…\n#&gt; $ age               &lt;int&gt; 0, 0, 2, 4, 1, 0, 2, 3, 2, 0, 1, 4, 0, 1, 3, 0, 2…\n#&gt; $ ethnicity         &lt;chr&gt; \"01\", \"01\", \"02\", \"04\", \"01\", \"99\", \"01\", \"03\", \"…\n#&gt; $ weight            &lt;dbl&gt; 9.710, 4.000, 11.900, 34.000, 9.500, 7.639, 12.20…\n#&gt; $ height            &lt;int&gt; 74, 50, 87, 110, 75, 70, 85, 108, 95, NA, 90, 105…\n#&gt; $ weight_for_age    &lt;fct&gt; Peso adequado para idade, Baixo peso para a idade…\n#&gt; $ weight_for_height &lt;fct&gt; Peso Adequado ou Eutrofico, Risco de sobrepeso, P…\n#&gt; $ height_for_age    &lt;fct&gt; Estatura adequada para a idade, Muito baixa estat…\n#&gt; $ bmi_for_age       &lt;fct&gt; Eutrofia, Eutrofia, Eutrofia, Obesidade, Eutrofia…\n\nStandardize Columns\n\ndata &lt;-\n  data |&gt;\n  mutate(\n    sex = sex |&gt;\n      as.character() |&gt;\n      case_match(\n        \"F\" ~ \"Female\",\n        \"M\" ~ \"Male\"\n      ) |&gt;\n      factor(\n        levels = c(\"Male\", \"Female\"),\n        ordered = FALSE\n      ),\n    ethnicity = ethnicity |&gt;\n      as.character() |&gt;\n      case_match(\n        \"01\" ~ \"White\",\n        \"02\" ~ \"Black\",\n        \"03\" ~ \"Yellow\",\n        \"04\" ~ \"Brown\",\n        \"05\" ~ \"Indigenous\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"White\",\n          \"Black\",\n          \"Yellow\",\n          \"Brown\",\n          \"Indigenous\"\n        ),\n        ordered = FALSE\n      ),\n    weight_for_age = weight_for_age |&gt;\n      as.character() |&gt;\n      case_match(\n        \"Muito baixo peso para a idade\" ~ \"Severely underweight\",\n        \"Baixo peso para a idade\" ~ \"Underweight\",\n        \"Peso adequado para idade\" ~ \"Normal\",\n        \"Peso elevado para a idade\" ~ \"High\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"Severely underweight\",\n          \"Underweight\",\n          \"Normal\",\n          \"High\"\n        ),\n        ordered = TRUE\n      ),\n    weight_for_height = weight_for_height |&gt;\n      as.character() |&gt;\n      case_match(\n        \"Magreza acentuada\" ~ \"Severe wasted\",\n        \"Magreza\" ~ \"Wasted\",\n        \"Peso Adequado ou Eutrofico\" ~ \"Normal\",\n        \"Risco de sobrepeso\" ~ \"Possible risk of overweight\",\n        \"Sobrepeso\" ~ \"Overweight\",\n        \"Obesidade\" ~ \"Obese\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"Severe wasted\",\n          \"Wasted\",\n          \"Normal\",\n          \"Possible risk of overweight\",\n          \"Overweight\",\n          \"Obese\"\n        ),\n        ordered = TRUE\n      ),\n    height_for_age = height_for_age |&gt;\n      as.character() |&gt;\n      case_match(\n        \"Muito baixa estatura para idade\" ~ \"Severely stunted\",\n        \"Baixa estatura para idade\" ~ \"Stunted\",\n        \"Estatura adequada para a idade\" ~ \"Normal\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"Severely stunted\",\n          \"Stunted\",\n          \"Normal\"\n        ),\n        ordered = TRUE\n      ),\n    bmi_for_age = bmi_for_age |&gt;\n      as.character() |&gt;\n      case_match(\n        \"Magreza acentuada\" ~ \"Severe wasted\",\n        \"Magreza\" ~ \"Wasted\",\n        \"Eutrofia\" ~ \"Normal\",\n        \"Risco de sobrepeso\" ~ \"Possible risk of overweight\",\n        \"Sobrepeso\" ~ \"Overweight\",\n        \"Obesidade\" ~ \"Obese\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"Severe wasted\",\n          \"Wasted\",\n          \"Normal\",\n          \"Possible risk of overweight\",\n          \"Overweight\",\n          \"Obese\"\n        ),\n        ordered = TRUE\n      )\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 7,290,143\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"E58A0CFF79CFFAE2F4CCFB27996BAE3546A498DD\", \"097B…\n#&gt; $ date              &lt;date&gt; 2023-01-09, 2023-01-05, 2023-01-04, 2023-01-04, …\n#&gt; $ municipality_code &lt;int&gt; 150295, 431720, 351960, 521040, 353890, 420290, 4…\n#&gt; $ cnes              &lt;int&gt; 2312670, 2254549, 373885, 2382482, 7260431, 75694…\n#&gt; $ sex               &lt;fct&gt; Male, Male, Male, Female, Female, Female, Male, M…\n#&gt; $ age               &lt;int&gt; 0, 0, 2, 4, 1, 0, 2, 3, 2, 0, 1, 4, 0, 1, 3, 0, 2…\n#&gt; $ ethnicity         &lt;fct&gt; White, White, Black, Brown, White, NA, White, Yel…\n#&gt; $ weight            &lt;dbl&gt; 9.710, 4.000, 11.900, 34.000, 9.500, 7.639, 12.20…\n#&gt; $ height            &lt;int&gt; 74, 50, 87, 110, 75, 70, 85, 108, 95, NA, 90, 105…\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Underweight, Normal, High, Normal, Normal…\n#&gt; $ weight_for_height &lt;ord&gt; Normal, Possible risk of overweight, Normal, Obes…\n#&gt; $ height_for_age    &lt;ord&gt; Normal, Severely stunted, Normal, Normal, Normal,…\n#&gt; $ bmi_for_age       &lt;ord&gt; Normal, Normal, Normal, Obese, Normal, Normal, No…"
  },
  {
    "objectID": "index.html#transform-data",
    "href": "index.html#transform-data",
    "title": "",
    "section": "Transform Data",
    "text": "Transform Data\nRemove Duplicates\n\ndata &lt;-\n  data |&gt;\n  arrange(desc(date)) |&gt;\n  distinct(id, date, .keep_all = TRUE)\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 7,273,731\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"49A374D16581329DA3BFB7B6852E8E1BA3F41C34\", \"E401…\n#&gt; $ date              &lt;date&gt; 2023-12-31, 2023-12-31, 2023-12-31, 2023-12-31, …\n#&gt; $ municipality_code &lt;int&gt; 431175, 521180, 230280, 210350, 261110, 150580, 2…\n#&gt; $ cnes              &lt;int&gt; 2247887, 5120659, 2478870, 2591200, 214752, 23128…\n#&gt; $ sex               &lt;fct&gt; Male, Male, Female, Female, Male, Male, Male, Fem…\n#&gt; $ age               &lt;int&gt; 2, 1, 1, 2, 4, 3, 1, 1, 4, 2, 1, 1, 3, 1, 1, 1, 1…\n#&gt; $ ethnicity         &lt;fct&gt; White, White, Brown, Brown, White, Yellow, Brown,…\n#&gt; $ weight            &lt;dbl&gt; 14.0, 11.0, 8.0, 11.5, 16.8, 7.3, 12.0, 8.0, 24.0…\n#&gt; $ height            &lt;int&gt; 90, 70, 60, 86, 103, 98, 77, 70, 119, NA, 83, 72,…\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Underweight, Normal, Normal, Seve…\n#&gt; $ weight_for_height &lt;ord&gt; Possible risk of overweight, Overweight, Overweig…\n#&gt; $ height_for_age    &lt;ord&gt; Normal, Stunted, Severely stunted, Stunted, Norma…\n#&gt; $ bmi_for_age       &lt;ord&gt; Normal, Obese, Obese, Normal, Normal, Severe wast…\n\nRemove Biological Implausible Values (BVI)\n\n\n\n\n\n\nSee the Data Validation section for more information.\n\n\n\n\ndata &lt;-\n  data |&gt;\n  mutate(\n    z_scores = anthro_zscores(\n      sex = as.numeric(sex),\n      age = age * 12,\n      is_age_in_month = TRUE,\n      weight = weight,\n      lenhei = height,\n      measure = \"h\"\n    ),\n    weight = if_else(\n      (z_scores$fwei == 1) | (z_scores$flen != 1 & z_scores$fwfl == 1),\n      NA,\n      weight\n    ),\n    height = if_else(\n      z_scores$flen == 1,\n      NA,\n      height\n    ),\n    weight_for_age = if_else(\n      is.na(weight),\n      NA,\n      weight_for_age\n    ),\n    weight_for_height = if_else(\n      is.na(weight) | is.na(height),\n      NA,\n      weight_for_height\n    ),\n    height_for_age = if_else(\n      is.na(height),\n      NA,\n      height_for_age\n    ),\n    bmi_for_age = if_else(\n      is.na(weight) | is.na(height),\n      NA,\n      bmi_for_age\n    )\n  ) |&gt;\n  select(-z_scores)\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 7,273,731\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"49A374D16581329DA3BFB7B6852E8E1BA3F41C34\", \"E401…\n#&gt; $ date              &lt;date&gt; 2023-12-31, 2023-12-31, 2023-12-31, 2023-12-31, …\n#&gt; $ municipality_code &lt;int&gt; 431175, 521180, 230280, 210350, 261110, 150580, 2…\n#&gt; $ cnes              &lt;int&gt; 2247887, 5120659, 2478870, 2591200, 214752, 23128…\n#&gt; $ sex               &lt;fct&gt; Male, Male, Female, Female, Male, Male, Male, Fem…\n#&gt; $ age               &lt;int&gt; 2, 1, 1, 2, 4, 3, 1, 1, 4, 2, 1, 1, 3, 1, 1, 1, 1…\n#&gt; $ ethnicity         &lt;fct&gt; White, White, Brown, Brown, White, Yellow, Brown,…\n#&gt; $ weight            &lt;dbl&gt; 14.0, 11.0, 8.0, 11.5, 16.8, NA, 12.0, 8.0, 24.0,…\n#&gt; $ height            &lt;int&gt; 90, 70, 60, 86, 103, 98, 77, 70, 119, NA, 83, 72,…\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Underweight, Normal, Normal, NA, …\n#&gt; $ weight_for_height &lt;ord&gt; Possible risk of overweight, Overweight, Overweig…\n#&gt; $ height_for_age    &lt;ord&gt; Normal, Stunted, Severely stunted, Stunted, Norma…\n#&gt; $ bmi_for_age       &lt;ord&gt; Normal, Obese, Obese, Normal, Normal, NA, Overwei…\n\nFix Municipality Code\n\ndata &lt;-\n  data |&gt;\n  rename(municipality_code_6 = municipality_code) |&gt;\n  left_join(\n    municipalities_data |&gt;\n      mutate(\n        municipality_code_6 = municipality_code |&gt;\n          str_sub(1, 6) |&gt;\n          as.integer()\n      ) |&gt;\n      select(municipality_code, municipality_code_6),\n    by = join_by(municipality_code_6)\n  ) |&gt;\n  select(-municipality_code_6) |&gt;\n  relocate(municipality_code, .after = date)\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 7,273,731\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"49A374D16581329DA3BFB7B6852E8E1BA3F41C34\", \"E401…\n#&gt; $ date              &lt;date&gt; 2023-12-31, 2023-12-31, 2023-12-31, 2023-12-31, …\n#&gt; $ municipality_code &lt;dbl&gt; 4311759, 5211800, 2302800, 2103505, 2611101, 1505…\n#&gt; $ cnes              &lt;int&gt; 2247887, 5120659, 2478870, 2591200, 214752, 23128…\n#&gt; $ sex               &lt;fct&gt; Male, Male, Female, Female, Male, Male, Male, Fem…\n#&gt; $ age               &lt;int&gt; 2, 1, 1, 2, 4, 3, 1, 1, 4, 2, 1, 1, 3, 1, 1, 1, 1…\n#&gt; $ ethnicity         &lt;fct&gt; White, White, Brown, Brown, White, Yellow, Brown,…\n#&gt; $ weight            &lt;dbl&gt; 14.0, 11.0, 8.0, 11.5, 16.8, NA, 12.0, 8.0, 24.0,…\n#&gt; $ height            &lt;int&gt; 90, 70, 60, 86, 103, 98, 77, 70, 119, NA, 83, 72,…\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Underweight, Normal, Normal, NA, …\n#&gt; $ weight_for_height &lt;ord&gt; Possible risk of overweight, Overweight, Overweig…\n#&gt; $ height_for_age    &lt;ord&gt; Normal, Stunted, Severely stunted, Stunted, Norma…\n#&gt; $ bmi_for_age       &lt;ord&gt; Normal, Obese, Obese, Normal, Normal, NA, Overwei…\n\nArrange Data\n\ndata &lt;-\n  data |&gt;\n  arrange(\n    date,\n    municipality_code,\n    cnes,\n    sex,\n    age\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 7,273,731\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"5A947ABCEA1CAC15C21EEFED4C4C880DF37F49EB\", \"0C99…\n#&gt; $ date              &lt;date&gt; 2023-01-01, 2023-01-01, 2023-01-01, 2023-01-01, …\n#&gt; $ municipality_code &lt;dbl&gt; 1302603, 1302603, 1302603, 1303700, 1303809, 1303…\n#&gt; $ cnes              &lt;int&gt; 2011786, 2011786, 2013932, 9970835, NA, NA, NA, 2…\n#&gt; $ sex               &lt;fct&gt; Male, Female, Male, Female, Male, Female, Male, F…\n#&gt; $ age               &lt;int&gt; 4, 3, 4, 2, 4, 0, 2, 4, 4, 1, 2, 4, 4, 4, 1, 4, 0…\n#&gt; $ ethnicity         &lt;fct&gt; Brown, Yellow, Brown, Yellow, Indigenous, Indigen…\n#&gt; $ weight            &lt;dbl&gt; 22.00, 14.70, 17.00, 11.10, 19.80, NA, 14.00, 16.…\n#&gt; $ height            &lt;int&gt; 115, 97, 110, 80, 100, NA, 91, 105, 110, 75, 74, …\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Normal, Normal, Normal, NA, Norma…\n#&gt; $ weight_for_height &lt;ord&gt; Normal, Normal, Normal, Normal, Overweight, NA, N…\n#&gt; $ height_for_age    &lt;ord&gt; Normal, Normal, Normal, Severely stunted, Normal,…\n#&gt; $ bmi_for_age       &lt;ord&gt; Possible risk of overweight, Normal, Normal, Poss…"
  },
  {
    "objectID": "index.html#create-data-dictionary",
    "href": "index.html#create-data-dictionary",
    "title": "",
    "section": "Create Data Dictionary",
    "text": "Create Data Dictionary\nPrepare Metadata\n\nmetadata &lt;-\n  data |&gt;\n  `var_label&lt;-`(\n    list(\n      id = \"Unique identifier for the individual\",\n      date = \"Date of the individual's nutritional assessment\",\n      municipality_code = paste0(\n        \"Institute of Geography and Statistics (IBGE) code of the \",\n        \"municipality where the assessment was performed\"\n      ),\n      cnes = paste0(\n        \"National Registry of Health Establishments (CNES) code of the \",\n        \"health facility where the assessment was performed\"\n      ),\n      sex = \"Sex of the individual\",\n      age = \"Age of the individual in years\",\n      ethnicity = \"Self-reported ethnicity/race or color of the individual\",\n      weight = \"Weight of the individual in kilograms\",\n      height = \"Height of the individual in centimeters\",\n      weight_for_age = paste0(\n        \"Nutritional status classification (children 0–5) based on \",\n        \"weight-for-age\"\n      ),\n      weight_for_height = paste0(\n        \"Nutritional status classification (children 0–5) based on \",\n        \"weight-for-height\"\n      ),\n      height_for_age = paste0(\n        \"Nutritional status classification (children 0–10) based on \",\n        \"height-for-age\"\n      ),\n      bmi_for_age = paste0(\n        \"Nutritional status classification (children 0–10) based on \",\n        \"BMI-for-age\"\n      )\n    )\n  ) |&gt;\n  generate_dictionary(details = \"full\") |&gt;\n  convert_list_columns_to_character()\n\nVisualize Final Data\n\nmetadata |&gt; glimpse()\n#&gt; Rows: 13\n#&gt; Columns: 14\n#&gt; $ pos           &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13\n#&gt; $ variable      &lt;chr&gt; \"id\", \"date\", \"municipality_code\", \"cnes\", \"sex\", \"ag…\n#&gt; $ label         &lt;chr&gt; \"Unique identifier for the individual\", \"Date of the …\n#&gt; $ col_type      &lt;chr&gt; \"chr\", \"date\", \"dbl\", \"int\", \"fct\", \"int\", \"fct\", \"db…\n#&gt; $ missing       &lt;int&gt; 0, 0, 0, 57013, 0, 0, 1142071, 1612199, 1509643, 1612…\n#&gt; $ levels        &lt;chr&gt; \"\", \"\", \"\", \"\", \"Male; Female\", \"\", \"White; Black; Ye…\n#&gt; $ value_labels  &lt;chr&gt; \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n#&gt; $ class         &lt;chr&gt; \"character\", \"Date\", \"numeric\", \"integer\", \"factor\", …\n#&gt; $ type          &lt;chr&gt; \"character\", \"double\", \"double\", \"integer\", \"integer\"…\n#&gt; $ na_values     &lt;chr&gt; \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n#&gt; $ na_range      &lt;chr&gt; \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"\n#&gt; $ n_na          &lt;int&gt; 0, 0, 0, 57013, 0, 0, 1142071, 1612199, 1509643, 1612…\n#&gt; $ unique_values &lt;int&gt; 7237146, 365, 5569, 43701, 2, 5, 6, 11123, 92, 5, 7, …\n#&gt; $ range         &lt;chr&gt; \"000002CB5BCC53DACE05639B3E1CD4BD1FF6C51A - FFFFFF927…\n\n\nmetadata\n\n\n  \n\n\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 7,273,731\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"5A947ABCEA1CAC15C21EEFED4C4C880DF37F49EB\", \"0C99…\n#&gt; $ date              &lt;date&gt; 2023-01-01, 2023-01-01, 2023-01-01, 2023-01-01, …\n#&gt; $ municipality_code &lt;dbl&gt; 1302603, 1302603, 1302603, 1303700, 1303809, 1303…\n#&gt; $ cnes              &lt;int&gt; 2011786, 2011786, 2013932, 9970835, NA, NA, NA, 2…\n#&gt; $ sex               &lt;fct&gt; Male, Female, Male, Female, Male, Female, Male, F…\n#&gt; $ age               &lt;int&gt; 4, 3, 4, 2, 4, 0, 2, 4, 4, 1, 2, 4, 4, 4, 1, 4, 0…\n#&gt; $ ethnicity         &lt;fct&gt; Brown, Yellow, Brown, Yellow, Indigenous, Indigen…\n#&gt; $ weight            &lt;dbl&gt; 22.00, 14.70, 17.00, 11.10, 19.80, NA, 14.00, 16.…\n#&gt; $ height            &lt;int&gt; 115, 97, 110, 80, 100, NA, 91, 105, 110, 75, 74, …\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Normal, Normal, Normal, NA, Norma…\n#&gt; $ weight_for_height &lt;ord&gt; Normal, Normal, Normal, Normal, Overweight, NA, N…\n#&gt; $ height_for_age    &lt;ord&gt; Normal, Normal, Normal, Severely stunted, Normal,…\n#&gt; $ bmi_for_age       &lt;ord&gt; Possible risk of overweight, Normal, Normal, Poss…\n\n\ndata"
  },
  {
    "objectID": "index.html#save-data",
    "href": "index.html#save-data",
    "title": "",
    "section": "Save Data",
    "text": "Save Data\n\n\n\n\n\n\nThe processed data are available in csv, rds and parquet formats through a dedicated repository on the Open Science Framework (OSF). See the Data Availability section for more information.\n\n\n\nWrite Data\n\nvalid_file_pattern &lt;-\n  year |&gt;\n  paste0(\n    \"-age-limits-\",\n    age_limits[1],\n    \"-\",\n    age_limits[2]\n  )\n\n\ndata |&gt;\n  write_csv(\n    here(data_dir, paste0(valid_file_pattern, \".csv\"))\n  )\n\n\ndata |&gt;\n  write_rds(\n    here(data_dir, paste0(valid_file_pattern, \".rds\"))\n  )\n\n\ndata |&gt;\n  write_parquet(\n    here(data_dir, paste0(valid_file_pattern, \".parquet\"))\n  )\n\nWrite Metadata\n\nmetadata_file_pattern &lt;-\n  \"metadata-\" |&gt;\n  paste0(\n    year,\n    \"-age-limits-\",\n    age_limits[1],\n    \"-\",\n    age_limits[2]\n  )\n\n\nmetadata |&gt;\n  write_csv(\n    here(data_dir, paste0(metadata_file_pattern, \".csv\"))\n  )\n\n\nmetadata |&gt;\n  write_rds(\n    here(data_dir, paste0(metadata_file_pattern, \".rds\"))\n  )\n\n\nmetadata |&gt;\n  write_parquet(\n    here(data_dir, paste0(metadata_file_pattern, \".parquet\"))\n  )"
  },
  {
    "objectID": "index.html#explore-data",
    "href": "index.html#explore-data",
    "title": "",
    "section": "Explore Data",
    "text": "Explore Data\nSummarize Frequencies\n\n\n\n\n\n\nSome SISVAN data may show discrepancies when compared to official population estimates. For example, the reported number of children under 5 classified as yellow in 2023 appears unusually high. If you notice such inconsistencies, check the SISVAN web reports to confirm before reporting an issue.\n\n\n\n\nCodevars &lt;- c(\n  \"sex\",\n  \"age\",\n  \"ethnicity\",\n  \"weight_for_age\",\n  \"weight_for_height\",\n  \"height_for_age\",\n  \"bmi_for_age\"\n)\n\n\n\nCodepanel_tabset_data &lt;- tibble()\n\nfor (i in vars) {\n  table &lt;-\n    data |&gt;\n    arrange(desc(.data[[i]])) |&gt;\n    distinct(id, .data[[i]]) |&gt;\n    group_by(.data[[i]]) |&gt;\n    summarize(n = n(), .groups = \"drop\") |&gt;\n    arrange(desc(n)) |&gt;\n    mutate(\n      !!i := .data[[i]] |&gt;\n        as.factor() |&gt;\n        fct_na_value_to_level(level = \"(NA)\") |&gt;\n        fct_reorder(n) |&gt;\n        fct_relevel(\"(NA)\", after = 0)\n    ) |&gt;\n    arrange(desc(.data[[i]])) |&gt;\n    mutate(\n      n_cum = cumsum(n),\n      pct = n |&gt;\n        divide_by(sum(n)) |&gt;\n        multiply_by(100),\n      pct_cum = pct |&gt;\n        cumsum() |&gt;\n        round(3),\n      pct = pct |&gt; round(3),\n      across(\n        .cols = where(is.numeric),\n        .fns = \\(x) prettyNum(x, big.mark = \",\", decimal.mark = \".\")\n      )\n    ) |&gt;\n    rename(\n      N = n,\n      `N (Cumulative)` = n_cum,\n      Percent = pct,\n      `Percent (Cumulative)` = pct_cum\n    ) |&gt;\n    kable()\n\n  panel_tabset_data &lt;-\n    panel_tabset_data |&gt;\n    bind_rows(\n      tibble(\n        label = paste0(\"`\", i, \"`\"),\n        table = list(table)\n      )\n    )\n}\n\n\n\nCodepanel_tabset_data |&gt; render_tabset(label, table)\n\n\nage\nbmi_for_age\nethnicity\nheight_for_age\nsex\nweight_for_age\nweight_for_height\n\n\n\n\n\nage\nN\nN (Cumulative)\nPercent\nPercent (Cumulative)\n\n\n\n0\n1,691,665\n1,691,665\n23.349\n23.349\n\n\n1\n1,466,717\n3,158,382\n20.244\n43.593\n\n\n4\n1,409,998\n4,568,380\n19.461\n63.054\n\n\n2\n1,355,180\n5,923,560\n18.705\n81.759\n\n\n3\n1,321,600\n7,245,160\n18.241\n100\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbmi_for_age\nN\nN (Cumulative)\nPercent\nPercent (Cumulative)\n\n\n\nNormal\n3,545,481\n3,545,481\n48.884\n48.884\n\n\nPossible risk of overweight\n991,166\n4,536,647\n13.666\n62.55\n\n\nOverweight\n434,183\n4,970,830\n5.986\n68.536\n\n\nObese\n228,781\n5,199,611\n3.154\n71.69\n\n\nWasted\n169,328\n5,368,939\n2.335\n74.025\n\n\nSevere wasted\n88,902\n5,457,841\n1.226\n75.251\n\n\n(NA)\n1,795,035\n7,252,876\n24.749\n100\n\n\n\n\n\n\n\nethnicity\nN\nN (Cumulative)\nPercent\nPercent (Cumulative)\n\n\n\nYellow\n2,345,345\n2,345,345\n32.407\n32.407\n\n\nWhite\n2,038,029\n4,383,374\n28.161\n60.568\n\n\nBrown\n1,486,639\n5,870,013\n20.542\n81.11\n\n\nBlack\n174,120\n6,044,133\n2.406\n83.515\n\n\nIndigenous\n53,156\n6,097,289\n0.734\n84.25\n\n\n(NA)\n1,139,857\n7,237,146\n15.75\n100\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nheight_for_age\nN\nN (Cumulative)\nPercent\nPercent (Cumulative)\n\n\n\nNormal\n5,020,425\n5,020,425\n69.265\n69.265\n\n\nStunted\n425,016\n5,445,441\n5.864\n75.129\n\n\nSeverely stunted\n298,757\n5,744,198\n4.122\n79.251\n\n\n(NA)\n1,503,933\n7,248,131\n20.749\n100\n\n\n\n\n\n\n\nsex\nN\nN (Cumulative)\nPercent\nPercent (Cumulative)\n\n\n\nMale\n3,713,250\n3,713,250\n51.308\n51.308\n\n\nFemale\n3,523,896\n7,237,146\n48.692\n100\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nweight_for_age\nN\nN (Cumulative)\nPercent\nPercent (Cumulative)\n\n\n\nNormal\n5,106,342\n5,106,342\n70.472\n70.472\n\n\nHigh\n305,772\n5,412,114\n4.22\n74.692\n\n\nUnderweight\n166,943\n5,579,057\n2.304\n76.996\n\n\nSeverely underweight\n60,807\n5,639,864\n0.839\n77.835\n\n\n(NA)\n1,606,032\n7,245,896\n22.165\n100\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nweight_for_height\nN\nN (Cumulative)\nPercent\nPercent (Cumulative)\n\n\n\nNormal\n3,660,833\n3,660,833\n50.483\n50.483\n\n\nPossible risk of overweight\n983,190\n4,644,023\n13.558\n64.041\n\n\nOverweight\n392,527\n5,036,550\n5.413\n69.454\n\n\nObese\n203,342\n5,239,892\n2.804\n72.258\n\n\nWasted\n143,713\n5,383,605\n1.982\n74.239\n\n\nSevere wasted\n67,486\n5,451,091\n0.931\n75.17\n\n\n(NA)\n1,800,585\n7,251,676\n24.83\n100\n\n\n\n\n\n\n\nPlot Bar Charts\n\n\n\n\n\n\nSome SISVAN data may show discrepancies when compared to official population estimates. For example, the reported number of children under 5 classified as yellow in 2023 appears unusually high. If you notice such inconsistencies, check the SISVAN web reports to confirm before reporting an issue.\n\n\n\n\nCodepanel_tabset_data &lt;- tibble()\n\nfor (i in vars) {\n  plot &lt;-\n    data |&gt;\n    mutate(\n      !!i := as.character(.data[[i]]),\n      !!i := ifelse(\n        str_length(.data[[i]]) &gt; 30,\n        paste0(str_sub(.data[[i]], 1, 27), \"...\"),\n        .data[[i]]\n      ) |&gt;\n        fct_na_value_to_level(level = \"(NA)\")\n    ) |&gt;\n    group_by(.data[[i]]) |&gt;\n    summarize(n = n(), .groups = \"drop\") |&gt;\n    mutate(\n      rel = n |&gt;\n        divide_by(sum(n)) |&gt;\n        round(2),\n      !!i := .data[[i]] |&gt;\n        fct_reorder(n) |&gt;\n        fct_relevel(\"(NA)\", after = 0)\n    ) |&gt;\n    ggplot(\n      aes(\n        x = .data[[i]],\n        y = n,\n        labels = percent(rel)\n      )\n    ) +\n    geom_col(fill = get_brand_color(\"green\")) +\n    geom_text(\n      hjust = -0.25,\n      size = 3\n    ) +\n    coord_flip() +\n    scale_y_continuous(\n      expand = expansion(mult = c(0.05, 0.15))\n    ) +\n    labs(x = NULL, y = NULL) +\n    theme(\n      axis.text.y = element_text(size = 8)\n    )\n\n  panel_tabset_data &lt;-\n    panel_tabset_data |&gt;\n    bind_rows(\n      tibble(\n        label = paste0(\"`\", i, \"`\"),\n        plot = list(plot)\n      )\n    )\n}\n\n\n\nCodepanel_tabset_data |&gt; render_tabset(label, plot)\n\n\nage\nbmi_for_age\nethnicity\nheight_for_age\nsex\nweight_for_age\nweight_for_height\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSummarize Descriptive Statistics\n\nCodevars &lt;- c(\n  \"date\",\n  \"weight\",\n  \"height\"\n)\n\n\n\nCodepanel_tabset_data &lt;- tibble()\n\nfor (i in vars) {\n  table &lt;-\n    data |&gt;\n    arrange(desc(.data[[i]])) |&gt;\n    distinct(id, .data[[i]]) |&gt;\n    stats_summary(i) |&gt;\n    mutate(\n      name = c(\n        \"Class\",\n        \"N\",\n        \"N (Without Missing)\",\n        \"N (Missing)\",\n        \"Mean\",\n        \"Variance\",\n        \"Standard Deviation\",\n        \"Minimum\",\n        \"1st Quartile (Q1)\",\n        \"Median\",\n        \"3rd Quartile (Q3)\",\n        \"Maximum\",\n        \"Interquartile Range (IQR)\",\n        \"Range\",\n        \"Skewness\",\n        \"Kurtosis\"\n      ),\n      value = if_else(\n        !str_detect(value, \"\\\\d{4}-\\\\d{2}-\\\\d{2}\"),\n        value |&gt;\n          prettyNum(big.mark = \",\", decimal.mark = \".\") |&gt;\n          str_trim(),\n        value\n      )\n    ) |&gt;\n    rename(\n      Name = name,\n      Value = value\n    ) |&gt;\n    kable()\n\n  panel_tabset_data &lt;-\n    panel_tabset_data |&gt;\n    bind_rows(\n      tibble(\n        label = paste0(\"`\", i, \"`\"),\n        table = list(table)\n      )\n    )\n}\n\n\n\nCodepanel_tabset_data |&gt; render_tabset(label, table)\n\n\ndate\nheight\nweight\n\n\n\n\n\nName\nValue\n\n\n\nClass\nDate\n\n\nN\n7,273,731\n\n\nN (Without Missing)\n7,273,731\n\n\nN (Missing)\n0\n\n\nMean\n2023-09-11\n\n\nVariance\n675,402,587.067,832s (~21.4 years)\n\n\nStandard Deviation\n7,639,030.27,371,018s (~12.63 weeks)\n\n\nMinimum\n2023-01-01\n\n\n1st Quartile (Q1)\n2023-07-27\n\n\nMedian\n2023-10-04\n\n\n3rd Quartile (Q3)\n2023-11-21\n\n\nMaximum\n2023-12-31\n\n\nInterquartile Range (IQR)\n10,108,800s (~16.71 weeks)\n\n\nRange\n31,449,600s (~52 weeks)\n\n\nSkewness\n-0.993245646806598\n\n\nKurtosis\n3.08772335061643\n\n\n\n\n\n\n\nName\nValue\n\n\n\nClass\ninteger\n\n\nN\n7,261,876\n\n\nN (Without Missing)\n5,758,005\n\n\nN (Missing)\n1,503,871\n\n\nMean\n89.6279690622012\n\n\nVariance\n246.572889788617\n\n\nStandard Deviation\n15.702639580294\n\n\nMinimum\n38\n\n\n1st Quartile (Q1)\n80\n\n\nMedian\n92\n\n\n3rd Quartile (Q3)\n101\n\n\nMaximum\n128\n\n\nInterquartile Range (IQR)\n21\n\n\nRange\n90\n\n\nSkewness\n-0.699042893863037\n\n\nKurtosis\n3.14509557344265\n\n\n\n\n\n\n\nName\nValue\n\n\n\nClass\nnumeric\n\n\nN\n7,262,785\n\n\nN (Without Missing)\n5,656,771\n\n\nN (Missing)\n1,606,014\n\n\nMean\n13.4700866034705\n\n\nVariance\n18.3701448246864\n\n\nStandard Deviation\n4.28604069330733\n\n\nMinimum\n0.945\n\n\n1st Quartile (Q1)\n11\n\n\nMedian\n13.5\n\n\n3rd Quartile (Q3)\n16\n\n\nMaximum\n32.51\n\n\nInterquartile Range (IQR)\n5\n\n\nRange\n31.565\n\n\nSkewness\n-0.0440857611925257\n\n\nKurtosis\n3.61371365104714\n\n\n\n\n\n\n\nPlot Histograms\n\nCodepanel_tabset_data &lt;- tibble()\n\nfor (i in vars) {\n  plot &lt;-\n    data |&gt;\n    tidyr::drop_na(all_of(i)) |&gt;\n    ggplot(\n      aes(\n        x = .data[[i]],\n        y = after_stat(count)\n      )\n    ) +\n    geom_histogram(\n      bins = 30,\n      fill = get_brand_color(\"gray-d25\"),\n      color = get_brand_color(\"white\")\n    ) +\n    # geom_density(\n    #   color = \"red\",\n    #   linewidth = 1\n    # ) +\n    labs(\n      title = ifelse(\n        i == \"date\",\n        paste(\"Distribution of\", str_to_title(i), \"of Nutritional Assessments\"),\n        paste(\"Distribution of\", str_to_title(i))\n      ),\n      x = str_to_title(i),\n      y = \"Frequency\"\n    ) +\n    theme(\n      axis.text.x = element_text(margin = margin(0, 0, 10, 0)),\n      axis.text.y = element_text(margin = margin(0, 0, 0, 20))\n    )\n\n  panel_tabset_data &lt;-\n    panel_tabset_data |&gt;\n    bind_rows(\n      tibble(\n        label = paste0(\"`\", i, \"`\"),\n        plot = list(plot)\n      )\n    )\n}\n\n\n\nCodepanel_tabset_data |&gt; render_tabset(label, plot)\n\n\ndate\nheight\nweight"
  },
  {
    "objectID": "index.html#check-relative-coverage",
    "href": "index.html#check-relative-coverage",
    "title": "",
    "section": "Check Relative Coverage",
    "text": "Check Relative Coverage\nTransform Data\nRemove Duplicates by Year\n\n\n\n\n\n\nAs described in Silva et al. (2023, p. 4), to calculate SISVAN’s total resident population coverage, only the most recent record for each individual within each year is retained for analysis.\n\n\n\n\nCodedata &lt;-\n  data |&gt;\n  mutate(year = year(date)) |&gt;\n  arrange(desc(date)) |&gt;\n  distinct(id, year, .keep_all = TRUE) |&gt;\n  relocate(year, .after = date)\n\n\n\nCodedata |&gt; glimpse()\n#&gt; Rows: 7,237,146\n#&gt; Columns: 14\n#&gt; $ id                &lt;chr&gt; \"95978385C9FBD8D908846992EDAB7AD1566C765C\", \"0732…\n#&gt; $ date              &lt;date&gt; 2023-12-31, 2023-12-31, 2023-12-31, 2023-12-31, …\n#&gt; $ year              &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n#&gt; $ municipality_code &lt;dbl&gt; 1100205, 1100452, 1100452, 1100452, 1100452, 1100…\n#&gt; $ cnes              &lt;int&gt; 5695880, 2806630, 2806630, 2806630, 9277927, 9277…\n#&gt; $ sex               &lt;fct&gt; Male, Male, Male, Female, Male, Female, Female, M…\n#&gt; $ age               &lt;int&gt; 2, 2, 3, 2, 3, 1, 4, 3, 1, 1, 3, 3, 3, 1, 3, 4, 4…\n#&gt; $ ethnicity         &lt;fct&gt; White, Brown, Brown, Yellow, Yellow, White, Brown…\n#&gt; $ weight            &lt;dbl&gt; 13.0, 14.0, 15.0, 12.0, 19.4, 11.5, 21.0, 17.0, 1…\n#&gt; $ height            &lt;int&gt; 80, 90, 95, 81, 103, 84, 116, 104, 76, 70, 84, 10…\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Normal, Normal, High, Normal, Nor…\n#&gt; $ weight_for_height &lt;ord&gt; Overweight, Possible risk of overweight, Normal, …\n#&gt; $ height_for_age    &lt;ord&gt; Stunted, Normal, Normal, Normal, Normal, Normal, …\n#&gt; $ bmi_for_age       &lt;ord&gt; Overweight, Possible risk of overweight, Normal, …\n\n\nSummarize Data by Year\n\nCodedata &lt;-\n  data |&gt;\n  summarize(\n    coverage = n(),\n    mean_age = age |&gt; mean(na.rm = TRUE),\n    mean_weight = weight |&gt; mean(na.rm = TRUE),\n    mean_height = height |&gt; mean(na.rm = TRUE),\n    .by = c(\n      \"year\",\n      \"municipality_code\"\n    )\n  )\n\n\n\nCodedata |&gt; glimpse()\n#&gt; Rows: 5,569\n#&gt; Columns: 6\n#&gt; $ year              &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n#&gt; $ municipality_code &lt;dbl&gt; 1100205, 1100452, 1100601, 1101807, 1200013, 1200…\n#&gt; $ coverage          &lt;int&gt; 12569, 1945, 246, 366, 1088, 914, 1634, 10810, 36…\n#&gt; $ mean_age          &lt;dbl&gt; 1.932373299, 1.665295630, 2.130081301, 1.89071038…\n#&gt; $ mean_weight       &lt;dbl&gt; 13.18117501, 12.74053459, 14.59693299, 13.7829060…\n#&gt; $ mean_height       &lt;dbl&gt; 88.81422925, 87.31281317, 95.27319588, 90.6430976…\n\n\nAdd Population Estimates\n\nCodedata &lt;-\n  population_estimates_data |&gt;\n  filter(between(age, age_limits[1], age_limits[2])) |&gt;\n  summarize(\n    n = population |&gt; sum(na.rm = TRUE),\n    .by = c(\n      \"year\",\n      \"municipality_code\"\n    )\n  ) |&gt;\n  right_join(\n    data,\n    by = c(\n      \"year\",\n      \"municipality_code\"\n    )\n  ) |&gt;\n  rename(population = n) |&gt;\n  relocate(population, .before = coverage)\n\n\n\nCodedata |&gt; glimpse()\n#&gt; Rows: 5,569\n#&gt; Columns: 7\n#&gt; $ year              &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ population        &lt;int&gt; 1683, 7831, 356, 6540, 1256, 1048, 556, 1118, 238…\n#&gt; $ coverage          &lt;int&gt; 1036, 2554, 243, 3278, 780, 687, 418, 779, 1048, …\n#&gt; $ mean_age          &lt;dbl&gt; 1.694015444, 1.779169930, 1.547325103, 1.68700427…\n#&gt; $ mean_weight       &lt;dbl&gt; 12.69762531, 12.01254692, 12.92741573, 12.6632511…\n#&gt; $ mean_height       &lt;dbl&gt; 88.59817945, 84.05950266, 87.34444444, 86.8941267…\n\n\nAdd Municipality Data\n\nCodedata &lt;-\n  data |&gt;\n  left_join(\n    municipalities_data,\n    by = join_by(municipality_code),\n    suffix = c(\".x\", \"\")\n  ) |&gt;\n  select(-latitude, -longitude) |&gt;\n  relocate(region_code:municipality, .after = year) |&gt;\n  relocate(municipality, .after = municipality_code)\n\n\n\nCodedata |&gt; glimpse()\n#&gt; Rows: 5,569\n#&gt; Columns: 13\n#&gt; $ year              &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ state             &lt;chr&gt; \"Rondônia\", \"Rondônia\", \"Rondônia\", \"Rondônia\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ municipality      &lt;chr&gt; \"Alta Floresta D'Oeste\", \"Ariquemes\", \"Cabixi\", \"…\n#&gt; $ population        &lt;int&gt; 1683, 7831, 356, 6540, 1256, 1048, 556, 1118, 238…\n#&gt; $ coverage          &lt;int&gt; 1036, 2554, 243, 3278, 780, 687, 418, 779, 1048, …\n#&gt; $ mean_age          &lt;dbl&gt; 1.694015444, 1.779169930, 1.547325103, 1.68700427…\n#&gt; $ mean_weight       &lt;dbl&gt; 12.69762531, 12.01254692, 12.92741573, 12.6632511…\n#&gt; $ mean_height       &lt;dbl&gt; 88.59817945, 84.05950266, 87.34444444, 86.8941267…\n\n\nValidate Data\n\n\n\n\n\n\nThe population value used here is an estimate. If the SISVAN coverage for a municipality exceeds the estimated population, the population value is adjusted to match the coverage.\n\n\n\n\nCodedata &lt;-\n  data |&gt;\n  mutate(\n    population = case_when(\n      coverage &gt; population ~ coverage,\n      TRUE ~ population\n    )\n  )\n\n\n\nCodedata |&gt; glimpse()\n#&gt; Rows: 5,569\n#&gt; Columns: 13\n#&gt; $ year              &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ state             &lt;chr&gt; \"Rondônia\", \"Rondônia\", \"Rondônia\", \"Rondônia\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ municipality      &lt;chr&gt; \"Alta Floresta D'Oeste\", \"Ariquemes\", \"Cabixi\", \"…\n#&gt; $ population        &lt;int&gt; 1683, 7831, 356, 6540, 1256, 1048, 556, 1118, 238…\n#&gt; $ coverage          &lt;int&gt; 1036, 2554, 243, 3278, 780, 687, 418, 779, 1048, …\n#&gt; $ mean_age          &lt;dbl&gt; 1.694015444, 1.779169930, 1.547325103, 1.68700427…\n#&gt; $ mean_weight       &lt;dbl&gt; 12.69762531, 12.01254692, 12.92741573, 12.6632511…\n#&gt; $ mean_height       &lt;dbl&gt; 88.59817945, 84.05950266, 87.34444444, 86.8941267…\n\n\nCalculate Relative Coverage\n\nCodedata &lt;-\n  data |&gt;\n  mutate(\n    coverage_pct = coverage |&gt;\n      divide_by(population) |&gt;\n      multiply_by(100)\n  ) |&gt;\n  relocate(coverage_pct, .after = coverage)\n\n\n\nCodedata |&gt; glimpse()\n#&gt; Rows: 5,569\n#&gt; Columns: 14\n#&gt; $ year              &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ state             &lt;chr&gt; \"Rondônia\", \"Rondônia\", \"Rondônia\", \"Rondônia\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ municipality      &lt;chr&gt; \"Alta Floresta D'Oeste\", \"Ariquemes\", \"Cabixi\", \"…\n#&gt; $ population        &lt;int&gt; 1683, 7831, 356, 6540, 1256, 1048, 556, 1118, 238…\n#&gt; $ coverage          &lt;int&gt; 1036, 2554, 243, 3278, 780, 687, 418, 779, 1048, …\n#&gt; $ coverage_pct      &lt;dbl&gt; 61.55674391, 32.61397012, 68.25842697, 50.1223241…\n#&gt; $ mean_age          &lt;dbl&gt; 1.694015444, 1.779169930, 1.547325103, 1.68700427…\n#&gt; $ mean_weight       &lt;dbl&gt; 12.69762531, 12.01254692, 12.92741573, 12.6632511…\n#&gt; $ mean_height       &lt;dbl&gt; 88.59817945, 84.05950266, 87.34444444, 86.8941267…\n\n\nArrange Data\n\nCodedata &lt;-\n  data |&gt;\n  arrange(\n    year,\n    municipality_code\n  )\n\n\n\nCodedata |&gt; glimpse()\n#&gt; Rows: 5,569\n#&gt; Columns: 14\n#&gt; $ year              &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ state             &lt;chr&gt; \"Rondônia\", \"Rondônia\", \"Rondônia\", \"Rondônia\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ municipality      &lt;chr&gt; \"Alta Floresta D'Oeste\", \"Ariquemes\", \"Cabixi\", \"…\n#&gt; $ population        &lt;int&gt; 1683, 7831, 356, 6540, 1256, 1048, 556, 1118, 238…\n#&gt; $ coverage          &lt;int&gt; 1036, 2554, 243, 3278, 780, 687, 418, 779, 1048, …\n#&gt; $ coverage_pct      &lt;dbl&gt; 61.55674391, 32.61397012, 68.25842697, 50.1223241…\n#&gt; $ mean_age          &lt;dbl&gt; 1.694015444, 1.779169930, 1.547325103, 1.68700427…\n#&gt; $ mean_weight       &lt;dbl&gt; 12.69762531, 12.01254692, 12.92741573, 12.6632511…\n#&gt; $ mean_height       &lt;dbl&gt; 88.59817945, 84.05950266, 87.34444444, 86.8941267…\n\n\nTabulate Relative Coverage by Region\nCodedata |&gt;\n  mutate(\n    region = brazil_region(region_code)\n  ) |&gt;\n  summarize(\n    population = population |&gt; sum(na.rm = TRUE),\n    coverage = coverage |&gt; sum(na.rm = TRUE),\n    .by = \"region\"\n  ) |&gt;\n  slice(c(1, 2, 5, 3, 4)) |&gt;\n  mutate(\n    coverage_pct = coverage |&gt;\n      divide_by(population) |&gt;\n      multiply_by(100) |&gt;\n      round(3),\n    across(\n      .cols = where(is.numeric),\n      .fns = \\(x) prettyNum(x, big.mark = \",\", decimal.mark = \".\")\n    )\n  ) |&gt;\n  arrange(desc(coverage_pct)) |&gt;\n  rename(\n    Region = region,\n    Population = population,\n    `SISVAN Coverage` = coverage,\n    `SISVAN Coverage (%)` = coverage_pct\n  ) |&gt;\n  pipe_table() |&gt;\n  cat_lines()\n\n\n\n\n\n\n\n\nRegion\nPopulation\nSISVAN Coverage\nSISVAN Coverage (%)\n\n\n\nNortheast\n3,766,882\n2,367,312\n62.845\n\n\nNorth\n1,491,017\n936,061\n62.78\n\n\nSouth\n1,866,192\n980,048\n52.516\n\n\nCentral-West\n1,163,709\n581,890\n50.003\n\n\nSoutheast\n5,144,676\n2,371,835\n46.103\n\n\nTabulate Relative Coverage by State\nCodedata |&gt;\n  mutate(\n    state = brazil_state(state_code)\n  ) |&gt;\n  summarize(\n    population = population |&gt; sum(na.rm = TRUE),\n    coverage = coverage |&gt; sum(na.rm = TRUE),\n    .by = \"state\"\n  ) |&gt;\n  arrange(state) |&gt;\n  mutate(\n    coverage_pct = coverage |&gt;\n      divide_by(population) |&gt;\n      multiply_by(100) |&gt;\n      round(3),\n    across(\n      .cols = where(is.numeric),\n      .fns = \\(x) prettyNum(x, big.mark = \",\", decimal.mark = \".\")\n    )\n  ) |&gt;\n  arrange(desc(coverage_pct)) |&gt;\n  rename(\n    State = state,\n    Population = population,\n    `SISVAN Coverage` = coverage,\n    `SISVAN Coverage (%)` = coverage_pct\n  ) |&gt;\n  pipe_table() |&gt;\n  cat_lines()\n\n\n\n\n\n\n\n\nState\nPopulation\nSISVAN Coverage\nSISVAN Coverage (%)\n\n\n\nAmazonas\n372,626\n258,619\n69.404\n\n\nPiauí\n223,295\n152,225\n68.172\n\n\nCeará\n603,297\n409,420\n67.864\n\n\nTocantins\n118,363\n79,276\n66.977\n\n\nMaranhão\n521,647\n339,351\n65.054\n\n\nAlagoas\n235,822\n153,311\n65.011\n\n\nPará\n655,706\n420,326\n64.103\n\n\nBahia\n917,506\n579,347\n63.144\n\n\nParaíba\n273,869\n172,150\n62.859\n\n\nSergipe\n151,907\n91,052\n59.939\n\n\nAcre\n74,909\n43,935\n58.651\n\n\nPernambuco\n625,346\n355,420\n56.836\n\n\nMinas Gerais\n1,223,545\n687,147\n56.16\n\n\nSanta Catarina\n504,318\n278,068\n55.137\n\n\nParaná\n730,202\n393,975\n53.954\n\n\nRio Grande do Norte\n214,193\n115,036\n53.707\n\n\nMato Grosso\n295,406\n158,514\n53.66\n\n\nMato Grosso do Sul\n210,411\n110,848\n52.682\n\n\nAmapá\n72,115\n37,543\n52.06\n\n\nRondônia\n126,022\n62,427\n49.537\n\n\nRio Grande do Sul\n631,672\n308,005\n48.76\n\n\nGoiás\n469,363\n227,488\n48.467\n\n\nRoraima\n71,276\n33,935\n47.611\n\n\nEspírito Santo\n266,283\n125,030\n46.954\n\n\nRio de Janeiro\n958,493\n444,301\n46.354\n\n\nDistrito Federal\n188,529\n85,040\n45.107\n\n\nSão Paulo\n2,696,355\n1,115,357\n41.365\n\n\nPlot Histogram by Municipality\n\nCodedata |&gt;\n  tidyr::drop_na(coverage_pct) |&gt;\n  ggplot(aes(x = coverage_pct)) +\n  geom_histogram(\n    aes(y = after_stat(density)),\n    bins = 30,\n    fill = get_brand_color(\"gray-d25\"),\n    color = get_brand_color(\"white\")\n  ) +\n  geom_density(\n    color = \"red\",\n    linewidth = 1\n  ) +\n  labs(\n    title = \"SISVAN Coverage by Municipality (%) (Ages 0-5)\",\n    subtitle = paste0(\"Year: \", year),\n    x = \"Coverage (%)\",\n    y = \"Density\",\n    caption = \"Source: SISVAN.\"\n  )\n\n\n\n\n\n\n\nPlot Map by Municipality\nSet Shape\n\nCodeshape &lt;-\n  read_municipality(\n    year = year |&gt;\n      closest_geobr_year(type = \"municipality\"),\n    showProgress = FALSE\n  ) |&gt;\n  st_transform(st_crs(4326))\n#&gt; ! The closest map year to 2023 is 2022. Using year 2022 instead.\n#&gt; Using year/date 2022\n\n\nPrepare Plot Data\n\nCodeplot_data &lt;-\n  data |&gt;\n  left_join(\n    shape,\n    by = join_by(municipality_code == code_muni)\n  ) |&gt;\n  rename(geometry = geom) |&gt;\n  select(\n    municipality_code,\n    coverage_pct,\n    geometry\n  ) |&gt;\n  tidyr::drop_na(coverage_pct)\n\n\nPlot Data\n\nCodebrand_div_palette &lt;- function(x) {\n  brandr:::make_color_ramp(\n    n = x,\n    colors = c(\n      get_brand_color(\"dark-red\"),\n      # get_brand_color(\"white\"),\n      get_brand_color_mix(\n        position = 950,\n        color_1 = \"dark-red\",\n        color_2 = \"dark-red-triadic-blue\",\n        alpha = 0.5\n      ),\n      get_brand_color(\"dark-red-triadic-blue\")\n    )\n  )\n}\n\n\n\nCodeplot_data |&gt;\n  st_as_sf() |&gt;\n  ggplot(aes(fill = coverage_pct)) +\n  geom_sf(\n    color = get_brand_color(\"gray\"),\n    linewidth = 0.05\n  ) +\n  scale_fill_binned(\n    breaks = seq(0, 100, 25),\n    limits = c(0, 100),\n    palette = brand_div_palette,\n    na.value = get_brand_color(\"gray-d25\")\n  ) +\n  annotation_scale(\n    aes(),\n    location = \"br\",\n    style = \"tick\",\n    height = unit(0.5, \"lines\")\n  ) +\n  annotation_north_arrow(\n    location = \"br\",\n    height = unit(2, \"lines\"),\n    width = unit(2, \"lines\"),\n    pad_x = unit(0.25, \"lines\"),\n    pad_y = unit(1.25, \"lines\"),\n    style = north_arrow_fancy_orienteering\n  ) +\n  labs(\n    title = \"SISVAN Coverage by Municipality (%) (Ages 0-5)\",\n    subtitle = paste0(\"Year: \", year),\n    fill = NULL,\n    caption = \"Source: SISVAN.\"\n  )\n#&gt; Scale on map varies by more than 10%, scale bar may be inaccurate"
  },
  {
    "objectID": "index.html#citation",
    "href": "index.html#citation",
    "title": "",
    "section": "Citation",
    "text": "Citation\n\n\n\n\n\n\nWhen using this data, you must also cite the original data sources.\n\n\n\nTo cite this work, please use the following format:\nVartanian, D., Schettino, J. P. J., & Carvalho, A. M. (2025). A reproducible pipeline for processing and analyzing SISVAN microdata on nutritional status monitoring in Brazil [Computer software]. Sustentarea Research and Extension Group, University of São Paulo. https://sustentarea.github.io/nutritional-status\nA BibLaTeX entry for LaTeX users is:\n@software{vartanian2025,\n  title = {A reproducible pipeline for processing and analyzing SISVAN microdata on nutritional status monitoring in Brazil},\n  author = {{Daniel Vartanian} and {João Pedro Junqueira Schettino} and {Aline Martins de Carvalho}},\n  year = {2025},\n  address = {São Paulo},\n  institution = {Sustentarea Research and Extension Group, University of São Paulo},\n  langid = {en},\n  url = {https://sustentarea.github.io/nutritional-status}\n}"
  },
  {
    "objectID": "index.html#license",
    "href": "index.html#license",
    "title": "",
    "section": "License",
    "text": "License\n \n\n\n\n\n\n\nThe original data sources may be subject to their own licensing terms and conditions.\n\n\n\nThe code in this repository is licensed under the GNU General Public License Version 3, while the report is available under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International.\nCopyright (C) 2025 Sustentarea Research and Extension Group\n\nThe code in this report is free software: you can redistribute it and/or\nmodify it under the terms of the GNU General Public License as published by the\nFree Software Foundation, either version 3 of the License, or (at your option)\nany later version.\n\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with\nthis program. If not, see &lt;https://www.gnu.org/licenses/&gt;."
  },
  {
    "objectID": "index.html#acknowledgments",
    "href": "index.html#acknowledgments",
    "title": "",
    "section": "Acknowledgments",
    "text": "Acknowledgments\n\n\n\n\n\nThis work is part of a research project by the Sustentarea Research and Extension Group of the University of São Paulo (USP) titled: Global syndemic: The impact of anthropogenic climate change on the health and nutrition of children under five years old attended by Brazil's public health system.\n\n\n\n\n\n\nThis work was supported by the Department of Science and Technology of the Secretariat of Science, Technology, and Innovation and of the Health Economic-Industrial Complex (SECTICS) of the Ministry of Health of Brazil, and the National Council for Scientific and Technological Development (CNPq) (grant no. 444588/2023-0)."
  },
  {
    "objectID": "index.html#references",
    "href": "index.html#references",
    "title": "",
    "section": "References",
    "text": "References\n\n\nAho, A., Kernighan, B., & Weinberger, P. (2023). The AWK programming language. Addison-Wesley Professional. https://www.awk.dev\n\n\nBagni, U. V., & Barros, D. C. D. (2015). Erro em antropometria aplicada à avaliação nutricional nos serviços de saúde: Causas, consequências e métodos de mensuração. Nutrire, 40(2), 226–236. https://doi.org/10.4322/2316-7874.18613\n\n\nBopp, M., & Faeh, D. (2008). End-digits preference for self-reported height depends on language. BMC Public Health, 8(1), 342. https://doi.org/10.1186/1471-2458-8-342\n\n\nComitê de Gestão de Indicadores, Rede Interagencial de Informações para a Saúde, Coordenação-Geral de Informações e Análises Epidemiológicas, Secretaria de Vigilância em Saúde e Ambiente, Ministério da Saúde, & Instituto Brasileiro de Geografia e Estatística. (n.d.). População residente – Estudo de estimativas populacionais por município, idade e sexo 2000-2024 – Brasil [Resident population – Study of population estimates by municipality, age, and sex, 2000–2024 – Brazil] [Data set]. DATASUS - Tabnet. Retrieved November 16, 2023, from http://tabnet.datasus.gov.br/cgi/deftohtm.exe?ibge/cnv/popsvs2024br.def\n\n\nCorsi, D. J., Perkins, J. M., & Subramanian, S. V. (2017). Child anthropometry data quality from Demographic and Health Surveys, Multiple Indicator Cluster Surveys, and National Nutrition Surveys in the West Central Africa region: Are we comparing apples and oranges? Global Health Action, 10(1), 1328185. https://doi.org/10.1080/16549716.2017.1328185\n\n\nDirk Schumacher. (n.d.-a). anthro: Computation of the WHO child growth standards [Computer software]. https://doi.org/10.32614/CRAN.package.anthro\n\n\nDirk Schumacher. (n.d.-b). anthroplus: Computation of the WHO 2007 references for school-age children and adolescents (5 to 19 years) [Computer software]. https://doi.org/10.32614/CRAN.package.anthroplus\n\n\nFinaret, A. B., & Hutchinson, M. (2018). Missingness of height data from the demographic and health surveys in Africa between 1991 and 2016 was not random but is unlikely to have major implications for biases in estimating stunting prevalence or the determinants of child height. The Journal of Nutrition, 148(5), 781–789. https://doi.org/10.1093/jn/nxy037\n\n\nLawman, H. G., Ogden, C. L., Hassink, S., Mallya, G., Vander Veur, S., & Foster, G. D. (2015). Comparing methods for identifying biologically implausible values in height, weight, and body mass index among youth. American Journal of Epidemiology, 182(4), 359–365. https://doi.org/10.1093/aje/kwv057\n\n\nLyons-Amos, M., & Stones, T. (2017). Trends in demographic and health survey data quality: An analysis of age heaping over time in 34 countries in sub saharan Africa between 1987 and 2015. BMC Research Notes, 10(1), 760. https://doi.org/10.1186/s13104-017-3091-x\n\n\nMei, Z. (2007). Standard deviation of anthropometric Z-scores as a data quality assessment tool using the 2006 WHO growth standards: A cross country analysis. Bulletin of the World Health Organization, 85(6), 441–448. https://doi.org/10.2471/BLT.06.034421\n\n\nMourão, E., Gallo, C. D. O., Nascimento, F. A. D., & Jaime, P. C. (2020). Tendência temporal da cobertura do Sistema de Vigilância Alimentar e Nutricional entre crianças menores de 5 anos da região Norte do Brasil, 2008-2017*. Epidemiologia e Serviços de Saúde, 29(2). https://doi.org/10.5123/S1679-49742020000200026\n\n\nNannan, N., Dorrington, R., & Bradshaw, D. (2019). Estimating completeness of birth registration in South Africa, 1996 – 2011. Bulletin of the World Health Organization, 97(7), 468–476. https://doi.org/10.2471/BLT.18.222620\n\n\nNascimento, F. A. D., Silva, S. A. D., & Jaime, P. C. (2017). Cobertura da avaliação do estado nutricional no Sistema de Vigilância Alimentar e Nutricional brasileiro: 2008 a 2013. Cadernos de Saúde Pública, 33(12). https://doi.org/10.1590/0102-311x00161516\n\n\nPereira, R. H. M., & Goncalves, C. N. (n.d.). geobr: Download official spatial data sets of Brazil [Computer software]. https://doi.org/10.32614/CRAN.package.geobr\n\n\nPerumal, N., Namaste, S., Qamar, H., Aimone, A., Bassani, D. G., & Roth, D. E. (2020). Anthropometric data quality assessment in multisurvey studies of child growth. The American Journal of Clinical Nutrition, 112, 806S–815S. https://doi.org/10.1093/ajcn/nqaa162\n\n\nR Core Team. (n.d.). R: A language and environment for statistical computing [Computer software]. R Foundation for Statistical Computing. https://www.R-project.org\n\n\nSilva, N. de J., Silva, J. F. de M. e, Carrilho, T. R. B., Pinto, E. de J., Andrade, R. da C. S. de, Silva, S. A., Pedroso, J., Spaniol, A. M., Bortolini, G. A., Fagundes, A., Nilson, E. A. F., Fiaccone, R. L., Kac, G., Barreto, M. L., & Ribeiro-Silva, R. de C. (2023). Qualidade dos dados antropométricos infantis do Sisvan, Brasil, 2008-2017. Revista de Saúde Pública, 57(1, 1), 62–62. https://doi.org/10.11606/s1518-8787.2023057004655\n\n\nSistema de Vigilância Alimentar e Nutricional, Coordenação-Geral de Alimentação e Nutrição, Departamento de Promoção da Saúde, Coordenação Setorial de Tecnologia da Informação, Secretaria de Atenção Primária à Saúde, & Ministério da Saúde. (n.d.). Microdados dos acompanhamentos de estado nutricional [Microdata on nutritional status monitoring] [Data set]. openDataSUS. Retrieved November 16, 2023, from https://opendatasus.saude.gov.br/dataset/sisvan-estado-nutricional\n\n\nUshey, K., & Wickham, H. (n.d.). renv: Project environments [Computer software]. https://doi.org/10.32614/CRAN.package.renv\n\n\nVartanian, D., & Carvalho, A. M. de. (2025). A reproducible pipeline for processing WorldClim 2.1 Historical Monthly Weather Data in Brazil [Computer software]. Sustentarea Research; Extension Center at the University of São Paulo. https://sustentarea.github.io/brazil-historical-climate\n\n\nWickham, H. (n.d.-a). The tidyverse style guide. Retrieved July 17, 2023, from https://style.tidyverse.org\n\n\nWickham, H. (n.d.-b). Tidy design principles. https://design.tidyverse.org\n\n\nWickham, H. (2023). The tidy tools manifesto. Tidyverse. https://tidyverse.tidyverse.org/articles/manifesto.html\n\n\nWickham, H., Çetinkaya-Rundel, M., & Grolemund, G. (2023). R for data science: Import, tidy, transform, visualize, and model data (2nd ed.). O’Reilly Media. https://r4ds.hadley.nz\n\n\nWorld Health Organization. (2006). WHO child growth standards: Length/height-for-age, weight-for-age, weight-for-length, weight-for-height and body mass index-for-age: Methods and development. WHO Press. https://www.who.int/tools/child-growth-standards/standards\n\n\nWorld Health Organization. (2008). Training course on child growth assessment. WHO Press. https://www.who.int/publications/i/item/9789241595070"
  }
]