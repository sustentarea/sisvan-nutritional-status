[
  {
    "objectID": "index.html#overview",
    "href": "index.html#overview",
    "title": "",
    "section": "Overview",
    "text": "Overview\nThis report provides a reproducible pipeline for processing microdata on nutritional status monitoring in Brazil from the Brazilian Food and Nutrition Surveillance System (SISVAN), focusing on the nutritional status of children aged 0–5 years in Brazil.\nIf you are working with other age groups, you will need to adapt the code accordingly. We provide some guidance on how to do this along the report.\nFor instructions on how to run the pipeline, see the repository README.\n\n\n\n\n\n\nThis pipeline is still under development and may not be fully functional.\nThis warning will be removed once the pipeline is complete."
  },
  {
    "objectID": "index.html#problem",
    "href": "index.html#problem",
    "title": "",
    "section": "Problem",
    "text": "Problem\nThe Food and Nutrition Surveillance System (SISVAN) is a strategic tool for monitoring the nutritional status of the Brazilian population, particularly those served by Brazil’s Unified Health System (SUS). However, despite its broad scope and importance, the anthropometric data recorded in SISVAN often suffer from accessability and quality issues that limit their usefulness for rigorous analyses and evidence-based policymaking (Silva et al., 2023).\nMultiple factors contribute to these quality concerns, including the lack of standardized measurement protocols, variability in staff training, inconsistencies in data entry and processing, and incomplete population coverage (Bagni & Barros, 2015; Corsi et al., 2017; Perumal et al., 2020). To assess and improve data quality, several indicators have been proposed and applied, such as population coverage (Mourão et al., 2020; Nascimento et al., 2017), completeness of birth dates and anthropometric measurements (Finaret & Hutchinson, 2018; Nannan et al., 2019), digit preference for age, height, and weight (Bopp & Faeh, 2008; Lyons-Amos & Stones, 2017), the percentage of biologically implausible values (Lawman et al., 2015), and the dispersion and distribution of standardized weight and height measurements (Mei, 2007; Perumal et al., 2020).\nIn light of these challenges, there is a need for an open and reproducible pipeline to process SISVAN microdata. Such a pipeline should facilitate broader access to the data and systematically identify, correct, and remove problematic records, thereby improving the consistency, completeness, and plausibility of the information for research and policymaking."
  },
  {
    "objectID": "index.html#data-availability",
    "href": "index.html#data-availability",
    "title": "",
    "section": "Data Availability",
    "text": "Data Availability\n\n\n\nThe processed data are available in csv, rds, and parquet formats via a dedicated repository on the Open Science Framework (OSF), accessible here. Each dataset is accompanied by a metadata file describing its structure and contents.\nYou can also retrieve these files directly from R using the osfr package."
  },
  {
    "objectID": "index.html#methods",
    "href": "index.html#methods",
    "title": "",
    "section": "Methods",
    "text": "Methods\nSource of Data\nThe data used in this report come from the following sources:\n\nBrazilian Food and Nutrition Surveillance System (SISVAN):\n\nMicrodata on nutritional status monitoring in Brazil (Sistema de Vigilância Alimentar e Nutricional et al., n.d.), the primary dataset for this pipeline. See the dataset technical note (in Portuguese) for details.\n\n\nBrazilian Institute of Geography and Statistics (IBGE):\n\nOfficial codes and metadata for Brazilian municipalities, incorporated via the geobr R package (Pereira & Goncalves, n.d.), used to enrich the dataset with geographic information.\n\n\nDepartment of Informatics of the Brazilian Unified Health System (DATASUS):\n\nAnnual population estimates by municipality, age, and sex for Brazil (Comitê de Gestão de Indicadores et al., n.d.), used to calculate SISVAN’s population coverage.\n\n\n\nThe DATASUS population estimates used in this pipeline are processed through a separate reproducible workflow, available here (Vartanian & Carvalho, 2025).\nData Munging\nThe data munging follow the data science workflow outlined by Wickham et al. (2023), as illustrated in Figure 1. All processes were made using the Quarto publishing system, along with the AWK (Aho et al., 2023) and R (R Core Team, n.d.) programming languages, supported by several R packages.\nFor data manipulation and workflow, priority was given to packages from the tidyverse, rOpenSci and r-spatial ecosystems, as well as other packages adhering to the tidy tools manifesto (Wickham, 2023).\n\n\nFigure 1: Data science workflow created by Wickham, Çetinkaya-Runde, and Grolemund.\n\n\nSource: Reproduced from Wickham et al. (2023).\n\n\n\nData Validation\n\n\n\n\n\n\nThe validation steps described below are specifically designed for children aged 0–5 years (i.e., younger than 60 months). If you are working with older children or adolescents (ages 5–19 years), you should adapt the code accordingly. For these age groups, we recommend using the WHO’s anthroplus R package (Dirk Schumacher, n.d.-b).\n\n\n\nDifferent validation techniques were used to ensure data quality and reliability:\n\nDuplicate records were removed by based on unique combinations of the SISVAN identifier (id) and assessment date (date).\nWeight and height measurements identified as biologically implausible values (BIVs) according to World Health Organization (WHO) child growth standards (World Health Organization, 2006, 2008) were set to missing. BIVs were detected by calculating z-scores using the anthro_zscores function from the WHO anthro R package (Dirk Schumacher, n.d.-a), based on weight, height, age, and sex. Implausible values were flagged when z-scores exceeded established WHO cutoffs (typically \\(|z| &gt; 5\\), which is an intentionally strict cutoff). For details, see the function documentation.\n\nData Categorization\nThe recommended approach is to calculate nutritional status categories based on z-scores, as described in the WHO child growth standards (World Health Organization, 2006, Section C). However, because the SISVAN data provide age only in years (rather than days or months, as required for accurate classification), this would introduce an unacceptably high classification error. Therefore, we decided to use the nutritional status categories already present in the microdata, but exclude values previously identified as biologically implausible values (BIVs).\nCode Style\nThe Tidyverse Tidy Tools Manifesto (Wickham, 2023), code style guide (Wickham, n.d.-a) and design principles (Wickham, n.d.-b) were followed to ensure consistency and enhance readability.\nReproducibility\nThe pipeline is fully reproducible and can be run again at any time. To ensure consistent results, the renv package (Ushey & Wickham, n.d.) is used to manage and restore the R environment. See the README file in the code repository to learn how to run it."
  },
  {
    "objectID": "index.html#set-environment",
    "href": "index.html#set-environment",
    "title": "",
    "section": "Set Environment",
    "text": "Set Environment\nLoad Packages\n\nlibrary(anthro)\nlibrary(brandr)\nlibrary(cli)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(fs)\nlibrary(geobr)\nlibrary(ggplot2)\nlibrary(ggspatial)\nlibrary(groomr) # github.com/danielvartan/groomr\nlibrary(here)\nlibrary(htmltools)\nlibrary(httr2)\nlibrary(janitor)\nlibrary(knitr)\nlibrary(labelled)\nlibrary(lubridate)\nlibrary(nanoparquet)\nlibrary(orbis) # github.com/danielvartan/orbis\nlibrary(osfr)\nlibrary(pal) # gitlab.com/rpkg.dev/pal\nlibrary(parallel)\nlibrary(quartabs)\nlibrary(readr)\nlibrary(scales)\nlibrary(sf)\nlibrary(stringr)\nlibrary(tidyr)\nlibrary(utils)\nlibrary(vroom)\nlibrary(zip)\n\nSet Data Directories\n\nraw_data_dir &lt;- here(\"data-raw\")\ndata_dir &lt;- here(\"data\")\n\n\nfor (i in c(raw_data_dir, data_dir)) {\n  if (!dir_exists(i)) dir_create(i, recurse = TRUE)\n}\n\nSet Initial Variables\n\n\n\n\n\n\nThe year variable represent the year of the consolidated SISVAN dataset on nutritional status.\n\n\n\n\nyear &lt;- 2020\n\n\n\n\n\n\n\nThe age_limits variable define the age range (in years) of individuals to be included in the analysis.\n\n\n\n\nage_limits &lt;- c(0, 4)\n\n\n\n\n\n\n\nThe col_selection variable specifies the columns to be imported from the raw SISVAN microdata files.\nClick here to access the microdata data dictionary (in Portuguese).\n\n\n\n\ncol_selection &lt;- c(\n  \"CO_PESSOA_SISVAN\",\n  \"DT_ACOMPANHAMENTO\",\n  \"CO_MUNICIPIO_IBGE\",\n  \"CO_CNES\",\n  \"SG_SEXO\",\n  \"NU_IDADE_ANO\",\n  \"CO_RACA_COR\",\n  \"NU_PESO\",\n  \"NU_ALTURA\",\n  \"PESO X IDADE\",\n  \"PESO X ALTURA\",\n  \"CRI. ALTURA X IDADE\",\n  \"CRI. IMC X IDADE\"\n)"
  },
  {
    "objectID": "index.html#download-and-import-ibge-municipalities-data",
    "href": "index.html#download-and-import-ibge-municipalities-data",
    "title": "",
    "section": "Download and Import IBGE Municipalities Data",
    "text": "Download and Import IBGE Municipalities Data\n\n\n\n\n\n\nSee the Source of Data section for more information.\n\n\n\n\nmunicipalities_data &lt;- brazil_municipality(year = year)\n#&gt; Using year/date 2020\n\n\nmunicipalities_data |&gt; glimpse()\n#&gt; Rows: 5,570\n#&gt; Columns: 9\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ state             &lt;chr&gt; \"Rondônia\", \"Rondônia\", \"Rondônia\", \"Rondônia\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ municipality      &lt;chr&gt; \"Alta Floresta D'Oeste\", \"Ariquemes\", \"Cabixi\", \"…\n#&gt; $ latitude          &lt;dbl&gt; -11.935540305, -9.908462867, -13.499763460, -11.4…\n#&gt; $ longitude         &lt;dbl&gt; -61.99982390, -63.03326928, -60.54431358, -61.442…"
  },
  {
    "objectID": "index.html#download-sisvan-microdata-on-nutritional-status",
    "href": "index.html#download-sisvan-microdata-on-nutritional-status",
    "title": "",
    "section": "Download SISVAN Microdata on Nutritional Status",
    "text": "Download SISVAN Microdata on Nutritional Status\n\n\n\n\n\n\nSee the Source of Data section for more information.\n\n\n\n\n\n\n\n\n\nThe microdata files are very large. For practical reasons, some code chunks have eval: false set to prevent downloading the data each time the report is rendered. When running the pipeline in a loop or for full automation, remove these lines to enable automatic downloading.\n\n\n\nDownload Data\n\nfile &lt;-\n  \"sisvan_estado_nutricional_\" |&gt;\n  paste0(year, \".zip\")\n\n\n\"https://s3.sa-east-1.amazonaws.com/ckan.saude.gov.br\" |&gt;\n  path(\n    \"SISVAN\",\n    \"estado_nutricional\",\n    file\n  ) |&gt;\n  request() |&gt;\n  req_progress() |&gt;\n  req_perform(here(raw_data_dir, file))\n#&gt; &lt;httr2_response&gt;\n#&gt; GET https://s3.sa-east-1.amazonaws.com/ckan.saude.gov.br/SISVAN/estado_nutricional/sisvan_estado_nutricional_2020.zip\n#&gt; Status: 200 OK\n#&gt; Content-Type: binary/octet-stream\n#&gt; Body: On disk '/home/danielvartan/Git/sisvan-nutritional-status/data-raw/sisvan_estado_nutricional_2020.zip' (1973814913 bytes)\n\nUnzip Data\n\nhere(raw_data_dir, file) |&gt;\n  unzip(exdir = raw_data_dir)\n\nDelete Zip Files\n\nraw_data_dir |&gt;\n  dir_ls(type = \"file\", regexp = \"\\\\.zip$\") |&gt;\n  file_delete()\n\nCheck Data Dimensions\n\nfile &lt;- file |&gt; str_replace(\"\\\\.zip$\", \"\\\\.csv\")\n\n\nraw_data_dir |&gt;\n  here(file) |&gt;\n  peek_csv_file(\n    delim = \";\",\n    skip = 0,\n    has_header = TRUE\n  )\n#&gt; The file has 34 columns, 22,720,514 rows, and 772,497,476 cells."
  },
  {
    "objectID": "index.html#import-and-filter-data",
    "href": "index.html#import-and-filter-data",
    "title": "",
    "section": "Import and Filter Data",
    "text": "Import and Filter Data\n\n\n\n\n\n\nThe vroom R package together with the AWK programming language were use to efficiently handle large datasets and mitigate memory issues. This approach allows the pipeline to run locally on most machines, though we recommend a minimum of 12 GB of RAM for optimal performance. Alternatively, the pipeline can also be executed on cloud platforms such as Google Colab and RStudio Cloud, or using GitHub Actions large runners.\n\n\n\nDefine Column Names and Schema\n\ncol_names &lt;- c(\n  \"CO_ACOMPANHAMENTO\",\n  \"CO_PESSOA_SISVAN\",\n  \"ST_PARTICIPA_ANDI\",\n  \"CO_MUNICIPIO_IBGE\",\n  \"SG_UF\",\n  \"NO_MUNICIPIO\",\n  \"CO_CNES\",\n  \"NU_IDADE_ANO\",\n  \"NU_FASE_VIDA\",\n  \"DS_FASE_VIDA\",\n  \"SG_SEXO\",\n  \"CO_RACA_COR\",\n  \"DS_RACA_COR\",\n  \"CO_POVO_COMUNIDADE\",\n  \"DS_POVO_COMUNIDADE\",\n  \"CO_ESCOLARIDADE\",\n  \"DS_ESCOLARIDADE\",\n  \"DT_ACOMPANHAMENTO\",\n  \"NU_COMPETENCIA\",\n  \"NU_PESO\",\n  \"NU_ALTURA\",\n  \"DS_IMC\",\n  \"DS_IMC_PRE_GESTACIONAL\",\n  \"PESO X IDADE\",\n  \"PESO X ALTURA\",\n  \"CRI. ALTURA X IDADE\",\n  \"CRI. IMC X IDADE\",\n  \"ADO. ALTURA X IDADE\",\n  \"ADO. IMC X IDADE\",\n  \"CO_ESTADO_NUTRI_ADULTO\",\n  \"CO_ESTADO_NUTRI_IDOSO\",\n  \"CO_ESTADO_NUTRI_IMC_SEMGEST\",\n  \"CO_SISTEMA_ORIGEM_ACOMP\",\n  \"SISTEMA_ORIGEM_ACOMP\"\n)\n\n\nschema &lt;- cols(\n  \"CO_ACOMPANHAMENTO\" = col_character(),\n  \"CO_PESSOA_SISVAN\" = col_character(),\n  \"ST_PARTICIPA_ANDI\" = col_character(),\n  \"CO_MUNICIPIO_IBGE\" = col_integer(),\n  \"SG_UF\" = col_factor(),\n  \"NO_MUNICIPIO\" = col_character(),\n  \"CO_CNES\" = col_integer(),\n  \"NU_IDADE_ANO\" = col_integer(),\n  \"NU_FASE_VIDA\" = col_character(), # decimal mark = \".\" (double)\n  \"DS_FASE_VIDA\" = col_factor(),\n  \"SG_SEXO\" = col_factor(),\n  \"CO_RACA_COR\" = col_character(),\n  \"DS_RACA_COR\" = col_factor(),\n  \"CO_POVO_COMUNIDADE\" = col_integer(),\n  \"DS_POVO_COMUNIDADE\" = col_factor(),\n  \"CO_ESCOLARIDADE\" = col_character(),\n  \"DS_ESCOLARIDADE\" = col_factor(),\n  \"DT_ACOMPANHAMENTO\" = col_date(),\n  \"NU_COMPETENCIA\" = col_integer(),\n  \"NU_PESO\" = col_double(),\n  \"NU_ALTURA\" = col_integer(),\n  \"DS_IMC\" = col_double(),\n  \"DS_IMC_PRE_GESTACIONAL\" = col_character(), # decimal mark = \".\" (double)\n  \"PESO X IDADE\" = col_factor(),\n  \"PESO X ALTURA\" = col_factor(),\n  \"CRI. ALTURA X IDADE\" = col_factor(),\n  \"CRI. IMC X IDADE\" = col_factor(),\n  \"ADO. ALTURA X IDADE\" = col_factor(),\n  \"ADO. IMC X IDADE\" = col_factor(),\n  \"CO_ESTADO_NUTRI_ADULTO\" = col_factor(),\n  \"CO_ESTADO_NUTRI_IDOSO\" = col_factor(),\n  \"CO_ESTADO_NUTRI_IMC_SEMGEST\" = col_factor(),\n  \"CO_SISTEMA_ORIGEM_ACOMP\" = col_integer(),\n  \"SISTEMA_ORIGEM_ACOMP\" = col_factor()\n)\n\nImport and Filter Data\n\n\n\n\n\n\nYou may see warning messages about failed parsing. These warnings are expected due to minor inconsistencies in the SISVAN raw data and do not affect the overall analysis.\n\n\n\n\ndata &lt;-\n  vroom(\n    file = pipe(\n      paste0(\n        \"awk \",\n        \"-F \", # Field separator\n        \"';' \",\n        \"'{\", # Program\n        \"if (\",\n        \"($8 &gt;= \",\n        age_limits[1],\n        \")\",\n        \" && \",\n        \"($8 &lt;= \",\n        age_limits[2],\n        \")\",\n        \") \",\n        \"{print}\",\n        \"}' \",\n        raw_data_dir |&gt; here(file) # file\n      )\n    ),\n    delim = \";\",\n    col_names = col_names,\n    col_types = schema,\n    col_select = all_of(col_selection),\n    na = c(\"\", \"NA\"),\n    locale = locale(\n      date_names = \"pt\",\n      date_format = \"%d/%m/%Y\",\n      time_format = \"%H:%M:%S\",\n      decimal_mark = \",\",\n      grouping_mark = \".\",\n      tz = \"America/Sao_Paulo\",\n      encoding = raw_data_dir |&gt;\n        here(file) |&gt;\n        guess_encoding() |&gt;\n        extract2(\"encoding\") |&gt;\n        magrittr::extract(1)\n    ),\n    guess_max = 100,\n    num_threads = detectCores() |&gt;\n      multiply_by(0.75) |&gt;\n      floor(),\n    progress = TRUE\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 3,773,171\n#&gt; Columns: 13\n#&gt; $ CO_PESSOA_SISVAN      &lt;chr&gt; \"2D31277BFE4031D31BBBF2FA5DB696A03BA6F812\", \"…\n#&gt; $ DT_ACOMPANHAMENTO     &lt;date&gt; 2020-01-17, 2020-01-19, 2020-01-19, 2020-01-…\n#&gt; $ CO_MUNICIPIO_IBGE     &lt;int&gt; 270450, 410590, 330600, 313110, 312060, 33042…\n#&gt; $ CO_CNES               &lt;int&gt; 9402705, 2774437, 2293803, 2156156, 5724228, …\n#&gt; $ SG_SEXO               &lt;fct&gt; F, M, M, M, F, M, F, M, F, M, M, M, M, F, F, …\n#&gt; $ NU_IDADE_ANO          &lt;int&gt; 0, 3, 4, 1, 0, 0, 0, 0, 0, 0, 2, 0, 4, 0, 1, …\n#&gt; $ CO_RACA_COR           &lt;chr&gt; \"04\", \"01\", \"04\", \"04\", \"04\", \"01\", \"01\", \"04…\n#&gt; $ NU_PESO               &lt;dbl&gt; NA, NA, NA, NA, 9.000, NA, 7.420, 5.875, 2.90…\n#&gt; $ NU_ALTURA             &lt;int&gt; 71, 109, 120, 72, 50, 70, 65, NA, 50, 63, NA,…\n#&gt; $ `PESO X IDADE`        &lt;fct&gt; Peso adequado para idade, Peso adequado para …\n#&gt; $ `PESO X ALTURA`       &lt;fct&gt; Peso Adequado ou Eutrofico, Peso Adequado ou …\n#&gt; $ `CRI. ALTURA X IDADE` &lt;fct&gt; Estatura adequada para a idade, Estatura adeq…\n#&gt; $ `CRI. IMC X IDADE`    &lt;fct&gt; Risco de sobrepeso, Eutrofia, Risco de sobrep…"
  },
  {
    "objectID": "index.html#tidy-data",
    "href": "index.html#tidy-data",
    "title": "",
    "section": "Tidy Data",
    "text": "Tidy Data\nRename Columns\n\ndata &lt;-\n  data |&gt;\n  clean_names() |&gt;\n  rename(\n    id = co_pessoa_sisvan,\n    date = dt_acompanhamento,\n    municipality_code = co_municipio_ibge,\n    cnes = co_cnes,\n    sex = sg_sexo,\n    age = nu_idade_ano,\n    ethnicity = co_raca_cor,\n    weight = nu_peso,\n    height = nu_altura,\n    weight_for_age = peso_x_idade,\n    weight_for_height = peso_x_altura,\n    height_for_age = cri_altura_x_idade,\n    bmi_for_age = cri_imc_x_idade\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 3,773,171\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"2D31277BFE4031D31BBBF2FA5DB696A03BA6F812\", \"F4F7…\n#&gt; $ date              &lt;date&gt; 2020-01-17, 2020-01-19, 2020-01-19, 2020-01-02, …\n#&gt; $ municipality_code &lt;int&gt; 270450, 410590, 330600, 313110, 312060, 330420, 4…\n#&gt; $ cnes              &lt;int&gt; 9402705, 2774437, 2293803, 2156156, 5724228, 2288…\n#&gt; $ sex               &lt;fct&gt; F, M, M, M, F, M, F, M, F, M, M, M, M, F, F, F, F…\n#&gt; $ age               &lt;int&gt; 0, 3, 4, 1, 0, 0, 0, 0, 0, 0, 2, 0, 4, 0, 1, 0, 0…\n#&gt; $ ethnicity         &lt;chr&gt; \"04\", \"01\", \"04\", \"04\", \"04\", \"01\", \"01\", \"04\", \"…\n#&gt; $ weight            &lt;dbl&gt; NA, NA, NA, NA, 9.000, NA, 7.420, 5.875, 2.900, 7…\n#&gt; $ height            &lt;int&gt; 71, 109, 120, 72, 50, 70, 65, NA, 50, 63, NA, 58,…\n#&gt; $ weight_for_age    &lt;fct&gt; Peso adequado para idade, Peso adequado para idad…\n#&gt; $ weight_for_height &lt;fct&gt; Peso Adequado ou Eutrofico, Peso Adequado ou Eutr…\n#&gt; $ height_for_age    &lt;fct&gt; Estatura adequada para a idade, Estatura adequada…\n#&gt; $ bmi_for_age       &lt;fct&gt; Risco de sobrepeso, Eutrofia, Risco de sobrepeso,…\n\nStandardize Columns\n\ndata &lt;-\n  data |&gt;\n  mutate(\n    sex = sex |&gt;\n      as.character() |&gt;\n      case_match(\n        \"F\" ~ \"female\",\n        \"M\" ~ \"male\"\n      ) |&gt;\n      factor(\n        levels = c(\"male\", \"female\"),\n        ordered = FALSE\n      ),\n    ethnicity = ethnicity |&gt;\n      as.character() |&gt;\n      case_match(\n        \"01\" ~ \"white\",\n        \"02\" ~ \"black\",\n        \"03\" ~ \"yellow\",\n        \"04\" ~ \"brown\",\n        \"05\" ~ \"indigenous\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"white\",\n          \"black\",\n          \"yellow\",\n          \"brown\",\n          \"indigenous\"\n        ),\n        ordered = FALSE\n      ),\n    weight_for_age = weight_for_age |&gt;\n      as.character() |&gt;\n      case_match(\n        \"Muito baixo peso para a idade\" ~ \"Severely underweight\",\n        \"Baixo peso para a idade\" ~ \"Underweight\",\n        \"Peso adequado para idade\" ~ \"Normal\",\n        \"Peso elevado para a idade\" ~ \"High\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"Severely underweight\",\n          \"Underweight\",\n          \"Normal\",\n          \"High\"\n        ),\n        ordered = TRUE\n      ),\n    weight_for_height = weight_for_height |&gt;\n      as.character() |&gt;\n      case_match(\n        \"Magreza acentuada\" ~ \"Severe wasted\",\n        \"Magreza\" ~ \"Wasted\",\n        \"Peso Adequado ou Eutrofico\" ~ \"Normal\",\n        \"Risco de sobrepeso\" ~ \"Possible risk of overweight\",\n        \"Sobrepeso\" ~ \"Overweight\",\n        \"Obesidade\" ~ \"Obese\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"Severe wasted\",\n          \"Wasted\",\n          \"Normal\",\n          \"Possible risk of overweight\",\n          \"Overweight\",\n          \"Obese\"\n        ),\n        ordered = TRUE\n      ),\n    height_for_age = height_for_age |&gt;\n      as.character() |&gt;\n      case_match(\n        \"Muito baixa estatura para idade\" ~ \"Severely stunted\",\n        \"Baixa estatura para idade\" ~ \"Stunted\",\n        \"Estatura adequada para a idade\" ~ \"Normal\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"Severely stunted\",\n          \"Stunted\",\n          \"Normal\"\n        ),\n        ordered = TRUE\n      ),\n    bmi_for_age = bmi_for_age |&gt;\n      as.character() |&gt;\n      case_match(\n        \"Magreza acentuada\" ~ \"Severe wasted\",\n        \"Magreza\" ~ \"Wasted\",\n        \"Eutrofia\" ~ \"Normal\",\n        \"Risco de sobrepeso\" ~ \"Possible risk of overweight\",\n        \"Sobrepeso\" ~ \"Overweight\",\n        \"Obesidade\" ~ \"Obese\"\n      ) |&gt;\n      factor(\n        levels = c(\n          \"Severe wasted\",\n          \"Wasted\",\n          \"Normal\",\n          \"Possible risk of overweight\",\n          \"Overweight\",\n          \"Obese\"\n        ),\n        ordered = TRUE\n      )\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 3,773,171\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"2D31277BFE4031D31BBBF2FA5DB696A03BA6F812\", \"F4F7…\n#&gt; $ date              &lt;date&gt; 2020-01-17, 2020-01-19, 2020-01-19, 2020-01-02, …\n#&gt; $ municipality_code &lt;int&gt; 270450, 410590, 330600, 313110, 312060, 330420, 4…\n#&gt; $ cnes              &lt;int&gt; 9402705, 2774437, 2293803, 2156156, 5724228, 2288…\n#&gt; $ sex               &lt;fct&gt; female, male, male, male, female, male, female, m…\n#&gt; $ age               &lt;int&gt; 0, 3, 4, 1, 0, 0, 0, 0, 0, 0, 2, 0, 4, 0, 1, 0, 0…\n#&gt; $ ethnicity         &lt;fct&gt; brown, white, brown, brown, brown, white, white, …\n#&gt; $ weight            &lt;dbl&gt; NA, NA, NA, NA, 9.000, NA, 7.420, 5.875, 2.900, 7…\n#&gt; $ height            &lt;int&gt; 71, 109, 120, 72, 50, 70, 65, NA, 50, 63, NA, 58,…\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, High, Normal, High, Normal, Norma…\n#&gt; $ weight_for_height &lt;ord&gt; Normal, Normal, Obese, Possible risk of overweigh…\n#&gt; $ height_for_age    &lt;ord&gt; Normal, Normal, Normal, Stunted, Severely stunted…\n#&gt; $ bmi_for_age       &lt;ord&gt; Possible risk of overweight, Normal, Possible ris…"
  },
  {
    "objectID": "index.html#transform-data",
    "href": "index.html#transform-data",
    "title": "",
    "section": "Transform Data",
    "text": "Transform Data\nRemove Duplicates\n\ndata &lt;-\n  data |&gt;\n  arrange(desc(date)) |&gt;\n  distinct(\n    id,\n    date,\n    .keep_all = TRUE\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 3,766,654\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"A997FAAAD810A21BA11F5203D6D7353E32BAB029\", \"2FE9…\n#&gt; $ date              &lt;date&gt; 2020-12-31, 2020-12-31, 2020-12-31, 2020-12-31, …\n#&gt; $ municipality_code &lt;int&gt; 231070, 310340, 530010, 330250, 521850, 130080, 5…\n#&gt; $ cnes              &lt;int&gt; 6431410, 7181221, 7347723, 5022967, 5966647, 5359…\n#&gt; $ sex               &lt;fct&gt; male, male, male, female, male, male, female, mal…\n#&gt; $ age               &lt;int&gt; 2, 4, 3, 3, 4, 3, 4, 3, 4, 2, 3, 4, 1, 1, 2, 4, 4…\n#&gt; $ ethnicity         &lt;fct&gt; white, brown, white, brown, white, brown, brown, …\n#&gt; $ weight            &lt;dbl&gt; 12.8, 16.0, 18.0, 12.0, 19.0, 14.0, 22.4, 14.0, 1…\n#&gt; $ height            &lt;int&gt; 80, 103, 112, 78, 99, 79, 114, 95, 108, 70, 101, …\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Normal, Underweight, Normal, Norm…\n#&gt; $ weight_for_height &lt;ord&gt; Overweight, Normal, Normal, Overweight, Overweigh…\n#&gt; $ height_for_age    &lt;ord&gt; Stunted, Normal, Normal, Severely stunted, Normal…\n#&gt; $ bmi_for_age       &lt;ord&gt; Possible risk of overweight, Normal, Normal, Over…\n\nRemove Biological Implausible Values (BVI)\n\n\n\n\n\n\nSee the Data Validation section for more information.\n\n\n\n\ndata &lt;-\n  data |&gt;\n  mutate(\n    z_scores = anthro_zscores(\n      sex = as.numeric(sex),\n      age = age * 12,\n      is_age_in_month = TRUE,\n      weight = weight,\n      lenhei = height,\n      measure = \"h\"\n    ),\n    weight = if_else(\n      (z_scores$fwei == 1) | (z_scores$flen != 1 & z_scores$fwfl == 1),\n      NA,\n      weight\n    ),\n    height = if_else(\n      z_scores$flen == 1,\n      NA,\n      height\n    ),\n    weight_for_age = if_else(\n      is.na(weight),\n      NA,\n      weight_for_age\n    ),\n    weight_for_height = if_else(\n      is.na(weight) | is.na(height),\n      NA,\n      weight_for_height\n    ),\n    height_for_age = if_else(\n      is.na(height),\n      NA,\n      height_for_age\n    ),\n    bmi_for_age = if_else(\n      is.na(weight) | is.na(height),\n      NA,\n      bmi_for_age\n    )\n  ) |&gt;\n  select(-z_scores)\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 3,766,654\n#&gt; Columns: 13\n#&gt; $ id                &lt;chr&gt; \"A997FAAAD810A21BA11F5203D6D7353E32BAB029\", \"2FE9…\n#&gt; $ date              &lt;date&gt; 2020-12-31, 2020-12-31, 2020-12-31, 2020-12-31, …\n#&gt; $ municipality_code &lt;int&gt; 231070, 310340, 530010, 330250, 521850, 130080, 5…\n#&gt; $ cnes              &lt;int&gt; 6431410, 7181221, 7347723, 5022967, 5966647, 5359…\n#&gt; $ sex               &lt;fct&gt; male, male, male, female, male, male, female, mal…\n#&gt; $ age               &lt;int&gt; 2, 4, 3, 3, 4, 3, 4, 3, 4, 2, 3, 4, 1, 1, 2, 4, 4…\n#&gt; $ ethnicity         &lt;fct&gt; white, brown, white, brown, white, brown, brown, …\n#&gt; $ weight            &lt;dbl&gt; 12.8, 16.0, 18.0, 12.0, 19.0, 14.0, 22.4, 14.0, 1…\n#&gt; $ height            &lt;int&gt; 80, 103, 112, 78, 99, 79, 114, 95, 108, 70, 101, …\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Normal, Underweight, Normal, Norm…\n#&gt; $ weight_for_height &lt;ord&gt; Overweight, Normal, Normal, Overweight, Overweigh…\n#&gt; $ height_for_age    &lt;ord&gt; Stunted, Normal, Normal, Severely stunted, Normal…\n#&gt; $ bmi_for_age       &lt;ord&gt; Possible risk of overweight, Normal, Normal, Over…\n\nAdd Municipality Information\n\ndata &lt;-\n  data |&gt;\n  rename(municipality_code_6 = municipality_code) |&gt;\n  left_join(\n    municipalities_data |&gt;\n      mutate(\n        municipality_code_6 = municipality_code |&gt;\n          str_sub(1, 6) |&gt;\n          as.integer()\n      ),\n    by = join_by(municipality_code_6),\n    suffix = c(\".x\", \"\")\n  ) |&gt;\n  select(-municipality_code_6, -latitude, -longitude) |&gt;\n  relocate(region_code:municipality, .after = date)\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 3,766,654\n#&gt; Columns: 19\n#&gt; $ id                &lt;chr&gt; \"A997FAAAD810A21BA11F5203D6D7353E32BAB029\", \"2FE9…\n#&gt; $ date              &lt;date&gt; 2020-12-31, 2020-12-31, 2020-12-31, 2020-12-31, …\n#&gt; $ region_code       &lt;int&gt; 2, 3, 5, 3, 5, 1, 5, 2, 1, 3, 3, 2, 2, 1, 1, 5, 4…\n#&gt; $ region            &lt;chr&gt; \"Northeast\", \"Southeast\", \"Central-West\", \"Southe…\n#&gt; $ state_code        &lt;int&gt; 23, 31, 53, 33, 52, 13, 52, 23, 13, 31, 31, 21, 2…\n#&gt; $ state             &lt;chr&gt; \"Ceará\", \"Minas Gerais\", \"Distrito Federal\", \"Rio…\n#&gt; $ federal_unit      &lt;chr&gt; \"CE\", \"MG\", \"DF\", \"RJ\", \"GO\", \"AM\", \"GO\", \"CE\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 2310704, 3103405, 5300108, 3302502, 5218508, 1300…\n#&gt; $ municipality      &lt;chr&gt; \"Pentecoste\", \"Araçuaí\", \"Brasília\", \"Magé\", \"Qui…\n#&gt; $ cnes              &lt;int&gt; 6431410, 7181221, 7347723, 5022967, 5966647, 5359…\n#&gt; $ sex               &lt;fct&gt; male, male, male, female, male, male, female, mal…\n#&gt; $ age               &lt;int&gt; 2, 4, 3, 3, 4, 3, 4, 3, 4, 2, 3, 4, 1, 1, 2, 4, 4…\n#&gt; $ ethnicity         &lt;fct&gt; white, brown, white, brown, white, brown, brown, …\n#&gt; $ weight            &lt;dbl&gt; 12.8, 16.0, 18.0, 12.0, 19.0, 14.0, 22.4, 14.0, 1…\n#&gt; $ height            &lt;int&gt; 80, 103, 112, 78, 99, 79, 114, 95, 108, 70, 101, …\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Normal, Underweight, Normal, Norm…\n#&gt; $ weight_for_height &lt;ord&gt; Overweight, Normal, Normal, Overweight, Overweigh…\n#&gt; $ height_for_age    &lt;ord&gt; Stunted, Normal, Normal, Severely stunted, Normal…\n#&gt; $ bmi_for_age       &lt;ord&gt; Possible risk of overweight, Normal, Normal, Over…\n\nArrange Data\n\ndata &lt;-\n  data |&gt;\n  arrange(\n    date,\n    municipality_code,\n    cnes,\n    sex,\n    age\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 3,766,654\n#&gt; Columns: 19\n#&gt; $ id                &lt;chr&gt; \"270495F54919816112BEDFE7ABF68A67E6CCA2B4\", \"51F1…\n#&gt; $ date              &lt;date&gt; 2020-01-01, 2020-01-01, 2020-01-01, 2020-01-01, …\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1…\n#&gt; $ state             &lt;chr&gt; \"Amazonas\", \"Amazonas\", \"Amazonas\", \"Amazonas\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"AM\", \"AM\", \"AM\", \"AM\", \"AM\", \"AM\", \"AM\", \"AM\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1300508, 1300508, 1302553, 1302603, 1302603, 1302…\n#&gt; $ municipality      &lt;chr&gt; \"Barreirinha\", \"Barreirinha\", \"Manaquiri\", \"Manau…\n#&gt; $ cnes              &lt;int&gt; 3583058, 5492890, 7137923, 2011794, 2011794, 2011…\n#&gt; $ sex               &lt;fct&gt; female, male, male, male, female, male, male, mal…\n#&gt; $ age               &lt;int&gt; 1, 2, 1, 1, 0, 1, 1, 2, 2, 3, 3, 4, 4, 2, 3, 3, 4…\n#&gt; $ ethnicity         &lt;fct&gt; yellow, brown, yellow, brown, brown, brown, brown…\n#&gt; $ weight            &lt;dbl&gt; 11.0, 13.3, 11.0, 10.0, NA, 9.0, 14.0, 18.0, 11.0…\n#&gt; $ height            &lt;int&gt; NA, 92, 74, 77, NA, 70, 79, 94, 84, 95, 95, 103, …\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Normal, Normal, NA, Normal, High,…\n#&gt; $ weight_for_height &lt;ord&gt; NA, Normal, Possible risk of overweight, Normal, …\n#&gt; $ height_for_age    &lt;ord&gt; NA, Normal, Normal, Normal, NA, Severely stunted,…\n#&gt; $ bmi_for_age       &lt;ord&gt; NA, Normal, Overweight, Normal, NA, Possible risk…"
  },
  {
    "objectID": "index.html#create-data-dictionary",
    "href": "index.html#create-data-dictionary",
    "title": "",
    "section": "Create Data Dictionary",
    "text": "Create Data Dictionary\nPrepare Metadata\n\nmetadata &lt;-\n  data |&gt;\n  `var_label&lt;-`(\n    list(\n      id = \"Unique identifier for the individual\",\n      date = \"Date of the individual's nutritional assessment\",\n      region_code = \"IBGE region code\",\n      region = \"Region name\",\n      state_code = \"IBGE state code\",\n      state = \"State name\",\n      federal_unit = \"Federal unit abbreviation\",\n      municipality_code = \"IBGE municipality code\",\n      municipality = \"Municipality name\",\n      sex = \"Sex of the individual\",\n      age = \"Age of the individual in years\",\n      ethnicity = \"Self-reported ethnicity/race or color of the individual\",\n      weight = \"Weight of the individual in kilograms\",\n      height = \"Height of the individual in centimeters\",\n      weight_for_age = \"Nutritional status classification (children 0–5) based on weight-for-age\",\n      weight_for_height = \"Nutritional status classification (children 0–5) based on weight-for-height\",\n      height_for_age = \"Nutritional status classification (children 0–10) based on height-for-age\",\n      bmi_for_age = \"Nutritional status classification (children 0–10) based on BMI-for-age\"\n    )\n  ) |&gt;\n  generate_dictionary(details = \"full\") |&gt;\n  convert_list_columns_to_character()\n\nVisualize Final Data\n\nmetadata |&gt; glimpse()\n#&gt; Rows: 19\n#&gt; Columns: 14\n#&gt; $ pos           &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16…\n#&gt; $ variable      &lt;chr&gt; \"id\", \"date\", \"region_code\", \"region\", \"state_code\", …\n#&gt; $ label         &lt;chr&gt; \"Unique identifier for the individual\", \"Date of the …\n#&gt; $ col_type      &lt;chr&gt; \"chr\", \"date\", \"int\", \"chr\", \"int\", \"chr\", \"chr\", \"db…\n#&gt; $ missing       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 29368, 0, 0, 181744, 99734…\n#&gt; $ levels        &lt;chr&gt; \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"male; female…\n#&gt; $ value_labels  &lt;chr&gt; \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"…\n#&gt; $ class         &lt;chr&gt; \"character\", \"Date\", \"integer\", \"character\", \"integer…\n#&gt; $ type          &lt;chr&gt; \"character\", \"double\", \"integer\", \"character\", \"integ…\n#&gt; $ na_values     &lt;chr&gt; \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"…\n#&gt; $ na_range      &lt;chr&gt; \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"…\n#&gt; $ n_na          &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 29368, 0, 0, 181744, 99734…\n#&gt; $ unique_values &lt;int&gt; 3731798, 366, 5, 5, 27, 27, 27, 5540, 5269, 40229, 2,…\n#&gt; $ range         &lt;chr&gt; \"000002CB5BCC53DACE05639B3E1CD4BD1FF6C51A - FFFFFCFBD…\n\n\nmetadata\n\n\n  \n\n\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 3,766,654\n#&gt; Columns: 19\n#&gt; $ id                &lt;chr&gt; \"270495F54919816112BEDFE7ABF68A67E6CCA2B4\", \"51F1…\n#&gt; $ date              &lt;date&gt; 2020-01-01, 2020-01-01, 2020-01-01, 2020-01-01, …\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1…\n#&gt; $ state             &lt;chr&gt; \"Amazonas\", \"Amazonas\", \"Amazonas\", \"Amazonas\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"AM\", \"AM\", \"AM\", \"AM\", \"AM\", \"AM\", \"AM\", \"AM\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1300508, 1300508, 1302553, 1302603, 1302603, 1302…\n#&gt; $ municipality      &lt;chr&gt; \"Barreirinha\", \"Barreirinha\", \"Manaquiri\", \"Manau…\n#&gt; $ cnes              &lt;int&gt; 3583058, 5492890, 7137923, 2011794, 2011794, 2011…\n#&gt; $ sex               &lt;fct&gt; female, male, male, male, female, male, male, mal…\n#&gt; $ age               &lt;int&gt; 1, 2, 1, 1, 0, 1, 1, 2, 2, 3, 3, 4, 4, 2, 3, 3, 4…\n#&gt; $ ethnicity         &lt;fct&gt; yellow, brown, yellow, brown, brown, brown, brown…\n#&gt; $ weight            &lt;dbl&gt; 11.0, 13.3, 11.0, 10.0, NA, 9.0, 14.0, 18.0, 11.0…\n#&gt; $ height            &lt;int&gt; NA, 92, 74, 77, NA, 70, 79, 94, 84, 95, 95, 103, …\n#&gt; $ weight_for_age    &lt;ord&gt; Normal, Normal, Normal, Normal, NA, Normal, High,…\n#&gt; $ weight_for_height &lt;ord&gt; NA, Normal, Possible risk of overweight, Normal, …\n#&gt; $ height_for_age    &lt;ord&gt; NA, Normal, Normal, Normal, NA, Severely stunted,…\n#&gt; $ bmi_for_age       &lt;ord&gt; NA, Normal, Overweight, Normal, NA, Possible risk…\n\n\ndata"
  },
  {
    "objectID": "index.html#save-data",
    "href": "index.html#save-data",
    "title": "",
    "section": "Save Data",
    "text": "Save Data\n\n\n\n\n\n\nThe processed data are available in csv, rds and parquet formats through a dedicated repository on the Open Science Framework (OSF). See the Data Availability section for more information.\n\n\n\nWrite Data\n\nvalid_file_pattern &lt;-\n  year |&gt;\n  paste0(\n    \"-age-limits-\",\n    age_limits[1],\n    \"-\",\n    age_limits[2]\n  )\n\n\ndata |&gt;\n  write_csv(\n    here(data_dir, paste0(valid_file_pattern, \".csv\"))\n  )\n\n\ndata |&gt;\n  write_rds(\n    here(data_dir, paste0(valid_file_pattern, \".rds\"))\n  )\n\n\ndata |&gt;\n  write_parquet(\n    here(data_dir, paste0(valid_file_pattern, \".parquet\"))\n  )\n\nWrite Metadata\n\nmetadata_file_pattern &lt;-\n  \"metadata-\" |&gt;\n  paste0(\n    year,\n    \"-age-limits-\",\n    age_limits[1],\n    \"-\",\n    age_limits[2]\n  )\n\n\nmetadata |&gt;\n  write_csv(\n    here(data_dir, paste0(metadata_file_pattern, \".csv\"))\n  )\n\n\nmetadata |&gt;\n  write_rds(\n    here(data_dir, paste0(metadata_file_pattern, \".rds\"))\n  )\n\n\nmetadata |&gt;\n  write_parquet(\n    here(data_dir, paste0(metadata_file_pattern, \".parquet\"))\n  )"
  },
  {
    "objectID": "index.html#explore-data",
    "href": "index.html#explore-data",
    "title": "",
    "section": "Explore Data",
    "text": "Explore Data\n\n\nSummarize Frequencies\n\nCodevars &lt;- c(\n  \"state\",\n  \"region\",\n  \"sex\",\n  \"age\",\n  \"ethnicity\",\n  \"weight_for_age\",\n  \"weight_for_height\",\n  \"height_for_age\",\n  \"bmi_for_age\"\n)\n\n\n\nCodepanel_tabset_data &lt;- tibble()\n\nfor (i in vars) {\n  table &lt;-\n    data |&gt;\n    distinct(id, .data[[i]]) |&gt;\n    group_by(.data[[i]]) |&gt;\n    summarize(n = n(), .groups = \"drop\") |&gt;\n    arrange(desc(n)) |&gt;\n    mutate(\n      n_cum = cumsum(n),\n      pct = n |&gt;\n        divide_by(sum(n)) |&gt;\n        multiply_by(100),\n      pct_cum = pct |&gt;\n        cumsum() |&gt;\n        round(3),\n      pct = pct |&gt; round(3)\n    ) |&gt;\n    kable()\n\n  panel_tabset_data &lt;-\n    panel_tabset_data |&gt;\n    bind_rows(\n      tibble(\n        label = paste0(\"`\", i, \"`\"),\n        table = list(table)\n      )\n    )\n}\n\n\n\nCodepanel_tabset_data |&gt; render_tabset(label, table)\n\n\nage\nbmi_for_age\nethnicity\nheight_for_age\nregion\nsex\nstate\nweight_for_age\nweight_for_height\n\n\n\n\n\nage\nn\nn_cum\npct\npct_cum\n\n\n\n0\n1019087\n1019087\n27.225\n27.225\n\n\n1\n777168\n1796255\n20.762\n47.987\n\n\n2\n671915\n2468170\n17.950\n65.937\n\n\n4\n644525\n3112695\n17.218\n83.155\n\n\n3\n630546\n3743241\n16.845\n100.000\n\n\n\n\n\n\n\nbmi_for_age\nn\nn_cum\npct\npct_cum\n\n\n\nNormal\n1637379\n1637379\n43.682\n43.682\n\n\nNA\n1109644\n2747023\n29.603\n73.286\n\n\nPossible risk of overweight\n486133\n3233156\n12.969\n86.255\n\n\nOverweight\n233118\n3466274\n6.219\n92.474\n\n\nObese\n142531\n3608805\n3.802\n96.277\n\n\nWasted\n87183\n3695988\n2.326\n98.603\n\n\nSevere wasted\n52377\n3748365\n1.397\n100.000\n\n\n\n\n\n\n\nethnicity\nn\nn_cum\npct\npct_cum\n\n\n\nbrown\n1578023\n1578023\n42.286\n42.286\n\n\nwhite\n1169290\n2747313\n31.333\n73.619\n\n\nyellow\n662471\n3409784\n17.752\n91.371\n\n\nNA\n180873\n3590657\n4.847\n96.218\n\n\nblack\n111362\n3702019\n2.984\n99.202\n\n\nindigenous\n29779\n3731798\n0.798\n100.000\n\n\n\n\n\n\n\nheight_for_age\nn\nn_cum\npct\npct_cum\n\n\n\nNormal\n2452226\n2452226\n65.542\n65.542\n\n\nNA\n866766\n3318992\n23.167\n88.709\n\n\nStunted\n222252\n3541244\n5.940\n94.649\n\n\nSeverely stunted\n200191\n3741435\n5.351\n100.000\n\n\n\n\n\n\n\nregion\nn\nn_cum\npct\npct_cum\n\n\n\nNortheast\n1299690\n1299690\n34.826\n34.826\n\n\nSoutheast\n1260004\n2559694\n33.763\n68.589\n\n\nNorth\n488470\n3048164\n13.089\n81.677\n\n\nSouth\n459339\n3507503\n12.308\n93.986\n\n\nCentral-West\n224448\n3731951\n6.014\n100.000\n\n\n\n\n\n\n\nsex\nn\nn_cum\npct\npct_cum\n\n\n\nmale\n1912626\n1912626\n51.252\n51.252\n\n\nfemale\n1819172\n3731798\n48.748\n100.000\n\n\n\n\n\n\n\nstate\nn\nn_cum\npct\npct_cum\n\n\n\nSão Paulo\n499385\n499385\n13.381\n13.381\n\n\nMinas Gerais\n464101\n963486\n12.436\n25.817\n\n\nBahia\n284523\n1248009\n7.624\n33.440\n\n\nRio de Janeiro\n239723\n1487732\n6.423\n39.864\n\n\nPernambuco\n231943\n1719675\n6.215\n46.079\n\n\nPará\n225397\n1945072\n6.040\n52.118\n\n\nCeará\n204200\n2149272\n5.472\n57.590\n\n\nParaná\n203349\n2352621\n5.449\n63.039\n\n\nMaranhão\n198587\n2551208\n5.321\n68.360\n\n\nAmazonas\n156308\n2707516\n4.188\n72.548\n\n\nRio Grande do Sul\n134163\n2841679\n3.595\n76.143\n\n\nSanta Catarina\n121832\n2963511\n3.264\n79.407\n\n\nParaíba\n115377\n3078888\n3.092\n82.499\n\n\nAlagoas\n85984\n3164872\n2.304\n84.803\n\n\nGoiás\n77393\n3242265\n2.074\n86.877\n\n\nPiauí\n75128\n3317393\n2.013\n88.890\n\n\nRio Grande do Norte\n68214\n3385607\n1.828\n90.718\n\n\nMato Grosso\n60869\n3446476\n1.631\n92.349\n\n\nEspírito Santo\n56820\n3503296\n1.522\n93.871\n\n\nMato Grosso do Sul\n48941\n3552237\n1.311\n95.182\n\n\nDistrito Federal\n37248\n3589485\n0.998\n96.180\n\n\nSergipe\n35770\n3625255\n0.958\n97.139\n\n\nTocantins\n33898\n3659153\n0.908\n98.047\n\n\nRondônia\n22559\n3681712\n0.604\n98.652\n\n\nAcre\n21602\n3703314\n0.579\n99.230\n\n\nRoraima\n14716\n3718030\n0.394\n99.625\n\n\nAmapá\n14002\n3732032\n0.375\n100.000\n\n\n\n\n\n\n\nweight_for_age\nn\nn_cum\npct\npct_cum\n\n\n\nNormal\n2433927\n2433927\n65.054\n65.054\n\n\nNA\n995014\n3428941\n26.595\n91.648\n\n\nHigh\n181509\n3610450\n4.851\n96.500\n\n\nUnderweight\n90774\n3701224\n2.426\n98.926\n\n\nSeverely underweight\n40193\n3741417\n1.074\n100.000\n\n\n\n\n\n\n\nweight_for_height\nn\nn_cum\npct\npct_cum\n\n\n\nNormal\n1696009\n1696009\n45.257\n45.257\n\n\nNA\n1111890\n2807899\n29.670\n74.927\n\n\nPossible risk of overweight\n483659\n3291558\n12.906\n87.833\n\n\nOverweight\n213951\n3505509\n5.709\n93.542\n\n\nObese\n127123\n3632632\n3.392\n96.934\n\n\nWasted\n75180\n3707812\n2.006\n98.940\n\n\nSevere wasted\n39723\n3747535\n1.060\n100.000\n\n\n\n\n\n\n\nPlot Bar Charts\n\nCodepanel_tabset_data &lt;- tibble()\n\nfor (i in vars) {\n  plot &lt;-\n    data |&gt;\n    mutate(\n      !!i := as.character(.data[[i]]),\n      !!i := ifelse(\n        str_length(.data[[i]]) &gt; 30,\n        paste0(str_sub(.data[[i]], 1, 27), \"...\"),\n        .data[[i]]\n      ),\n      !!i := fct_na_value_to_level(.data[[i]], level = \"(NA)\")\n    ) |&gt;\n    group_by(.data[[i]]) |&gt;\n    summarize(n = n(), .groups = \"drop\") |&gt;\n    mutate(\n      rel = n |&gt;\n        divide_by(sum(n)) |&gt;\n        round(2),\n      !!i := fct_reorder(.data[[i]], n),\n      !!i := fct_relevel(.data[[i]], \"(NA)\", after = 0)\n    ) |&gt;\n    ggplot(\n      aes(\n        x = .data[[i]],\n        y = n,\n        labels = percent(rel)\n      )\n    ) +\n    geom_col(fill = get_brand_color(\"green\")) +\n    geom_text(\n      hjust = -0.25,\n      size = 3\n    ) +\n    coord_flip() +\n    scale_y_continuous(\n      expand = expansion(mult = c(0.05, 0.15))\n    ) +\n    labs(x = NULL, y = NULL) +\n    theme(\n      axis.text.y = element_text(size = 8)\n    )\n\n  panel_tabset_data &lt;-\n    panel_tabset_data |&gt;\n    bind_rows(\n      tibble(\n        label = paste0(\"`\", i, \"`\"),\n        plot = list(plot)\n      )\n    )\n}\n\n\n\nCodepanel_tabset_data |&gt; render_tabset(label, plot)\n\n\nage\nbmi_for_age\nethnicity\nheight_for_age\nregion\nsex\nstate\nweight_for_age\nweight_for_height\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlot Histograms\n\nCodepanel_tabset_data &lt;- tibble()\n\nfor (i in c(\"weight\", \"height\")) {\n  plot &lt;-\n    data |&gt;\n    ggplot(aes(x = .data[[i]])) +\n    geom_histogram(\n      bins = 30,\n      fill = get_brand_color(\"gray-d25\"),\n      color = get_brand_color(\"white\")\n    ) +\n    # geom_density(\n    #   color = \"red\",\n    #   linewidth = 1\n    # ) +\n    labs(\n      title = paste(\"Distribution of\", str_to_title(i)),\n      x = str_to_title(i),\n      y = \"Frequency\"\n    )\n\n  panel_tabset_data &lt;-\n    panel_tabset_data |&gt;\n    bind_rows(\n      tibble(\n        label = paste0(\"`\", i, \"`\"),\n        plot = list(plot)\n      )\n    )\n}\n\n\n\nCodepanel_tabset_data |&gt; render_tabset(label, plot)\n\n\nheight\nweight\n\n\n\n#&gt; Warning: Removed 867640 rows containing non-finite outside the scale range\n#&gt; (`stat_bin()`).\n\n\n\n#&gt; Warning: Removed 997347 rows containing non-finite outside the scale range\n#&gt; (`stat_bin()`)."
  },
  {
    "objectID": "index.html#summarize-relative-coverage",
    "href": "index.html#summarize-relative-coverage",
    "title": "",
    "section": "Summarize Relative Coverage",
    "text": "Summarize Relative Coverage\nDownload DATASUS Population Estimates\n\n\n\n\n\n\nAs described in the Methods section, the population estimates were obtained from the DATASUS platform, which provides annual data by municipality, age, and sex for Brazil from 2000 to 2024 (Comitê de Gestão de Indicadores et al., n.d.).\nThe DATASUS data used in this pipeline are processed and validated through a separate reproducible pipeline, available here (Vartanian & Carvalho, 2025). The datasets are downloaded directly from OSF.\n\n\n\nList Files\n\ndatasus_file_pattern &lt;-\n  \"datasus-pop-estimates-\" |&gt;\n  paste0(year)\n\n\ndatasus_file &lt;-\n  raw_data_dir |&gt;\n  here(paste0(datasus_file_pattern, \".rds\"))\n\n\nosf_raw_data_id &lt;- \"h3pyd\"\n\n\nosf_raw_data_file &lt;-\n  osf_raw_data_id |&gt;\n  osf_retrieve_node() |&gt;\n  osf_ls_files(\n    type = \"file\",\n    pattern = paste0(year, \".rds\")\n  ) |&gt;\n  filter(str_detect(name, paste0(\"^\", year, \"\\\\.rds$\")))\n\n\nosf_raw_data_file\n\n\n  \n\n\n\nDownload Data\n\nif (!file_exists(datasus_file)) {\n  osf_raw_data_file |&gt;\n    osf_download(\n      path = raw_data_dir,\n      conflicts = \"overwrite\"\n    ) |&gt;\n    pull(local_path)\n}\n#&gt; [1] \"data-raw/2020.rds\"\n\nRename File\n\nif (!file_exists(datasus_file)) {\n  raw_data_dir |&gt;\n    dir_ls(\n      type = \"file\",\n      regexp = paste0(year, \"\\\\.rds$\")\n    ) |&gt;\n    file_move(datasus_file)\n}\n\nImport DATASUS Population Estimates\n\npop_estimates_data &lt;- datasus_file |&gt; read_rds()\n\n\npop_estimates_data |&gt; glimpse()\n#&gt; Rows: 902,340\n#&gt; Columns: 11\n#&gt; $ year              &lt;int&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ state             &lt;chr&gt; \"Rondônia\", \"Rondônia\", \"Rondônia\", \"Rondônia\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100015, 1100015, 1100015, 1100015, 1100…\n#&gt; $ municipality      &lt;chr&gt; \"Alta Floresta D'Oeste\", \"Alta Floresta D'Oeste\",…\n#&gt; $ sex               &lt;fct&gt; male, male, male, male, male, male, male, male, m…\n#&gt; $ age               &lt;int&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,…\n#&gt; $ population        &lt;int&gt; 188, 189, 186, 179, 180, 183, 181, 180, 186, 188,…\n\nTransform Data\nRemove Duplicates by Year\n\n\n\n\n\n\nAs described in Silva et al. (2023, p. 4), to calculate SISVAN’s total resident population coverage, only the most recent record for each individual within each year is retained for analysis.\n\n\n\n\ndata &lt;-\n  data |&gt;\n  mutate(year = year(date)) |&gt;\n  arrange(desc(date)) |&gt;\n  distinct(id, year, .keep_all = TRUE) |&gt;\n  relocate(year, .after = date)\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 3,731,798\n#&gt; Columns: 20\n#&gt; $ id                &lt;chr&gt; \"E6855D740B30B337B7AE708AB158E42622F750F8\", \"8AA5…\n#&gt; $ date              &lt;date&gt; 2020-12-31, 2020-12-31, 2020-12-31, 2020-12-31, …\n#&gt; $ year              &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ region            &lt;chr&gt; \"North\", \"North\", \"North\", \"North\", \"North\", \"Nor…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 1…\n#&gt; $ state             &lt;chr&gt; \"Rondônia\", \"Rondônia\", \"Rondônia\", \"Rondônia\", \"…\n#&gt; $ federal_unit      &lt;chr&gt; \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"RO\", \"AC\", \"…\n#&gt; $ municipality_code &lt;dbl&gt; 1100114, 1100114, 1100114, 1100205, 1100205, 1100…\n#&gt; $ municipality      &lt;chr&gt; \"Jaru\", \"Jaru\", \"Jaru\", \"Porto Velho\", \"Porto Vel…\n#&gt; $ cnes              &lt;int&gt; 2806894, 2806894, 2806932, 2496577, 2806568, 2496…\n#&gt; $ sex               &lt;fct&gt; male, male, male, male, female, male, male, male,…\n#&gt; $ age               &lt;int&gt; 0, 0, 0, 0, 0, 0, 3, 1, 2, 3, 3, 3, 4, 1, 2, 2, 3…\n#&gt; $ ethnicity         &lt;fct&gt; yellow, yellow, white, white, yellow, white, whit…\n#&gt; $ weight            &lt;dbl&gt; NA, 4.17, NA, 4.05, NA, 3.40, 13.80, 13.00, 13.10…\n#&gt; $ height            &lt;int&gt; NA, 50, NA, 56, NA, 52, 90, 75, 75, 105, 100, 90,…\n#&gt; $ weight_for_age    &lt;ord&gt; NA, Normal, NA, Normal, NA, Normal, Normal, Norma…\n#&gt; $ weight_for_height &lt;ord&gt; NA, Overweight, NA, Wasted, NA, Normal, Normal, O…\n#&gt; $ height_for_age    &lt;ord&gt; NA, Normal, NA, Normal, NA, Normal, Normal, Norma…\n#&gt; $ bmi_for_age       &lt;ord&gt; NA, Overweight, NA, Normal, NA, Normal, Normal, O…\n\nSummarize Data by Year\n\ndata &lt;-\n  data |&gt;\n  summarize(\n    coverage = n(),\n    mean_age = age |&gt; mean(na.rm = TRUE),\n    mean_weight = weight |&gt; mean(na.rm = TRUE),\n    mean_height = height |&gt; mean(na.rm = TRUE),\n    .by = c(\n      \"year\",\n      \"region_code\",\n      \"state_code\",\n      \"municipality_code\"\n    )\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 5,540\n#&gt; Columns: 8\n#&gt; $ year              &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 1…\n#&gt; $ municipality_code &lt;dbl&gt; 1100114, 1100205, 1100254, 1100288, 1200013, 1200…\n#&gt; $ coverage          &lt;int&gt; 1418, 3570, 539, 686, 638, 2897, 731, 1446, 952, …\n#&gt; $ mean_age          &lt;dbl&gt; 1.213681241, 1.194677871, 1.606679035, 1.39212828…\n#&gt; $ mean_weight       &lt;dbl&gt; 10.25817826, 11.06942857, 12.66480615, 11.8539358…\n#&gt; $ mean_height       &lt;dbl&gt; 77.18086957, 80.19416700, 85.60277136, 83.6907216…\n\nCalculate Population Estimates\n\ndata &lt;-\n  pop_estimates_data |&gt;\n  filter(between(age, age_limits[1], age_limits[2])) |&gt;\n  summarize(\n    n = population |&gt; sum(na.rm = TRUE),\n    .by = c(\n      \"year\",\n      \"region_code\",\n      \"state_code\",\n      \"municipality_code\"\n    )\n  ) |&gt;\n  right_join(\n    data,\n    by = c(\n      \"year\",\n      \"region_code\",\n      \"state_code\",\n      \"municipality_code\"\n    )\n  ) |&gt;\n  rename(population = n) |&gt;\n  relocate(population, .before = coverage)\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 5,540\n#&gt; Columns: 9\n#&gt; $ year              &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ population        &lt;int&gt; 1793, 8132, 401, 6654, 1299, 1177, 602, 1250, 249…\n#&gt; $ coverage          &lt;int&gt; 485, 586, 161, 808, 449, 300, 216, 250, 572, 1014…\n#&gt; $ mean_age          &lt;dbl&gt; 1.6762886598, 1.1040955631, 1.4285714286, 1.16831…\n#&gt; $ mean_weight       &lt;dbl&gt; 13.340250696, 9.711138655, 12.387675926, 10.78976…\n#&gt; $ mean_height       &lt;dbl&gt; 89.86363636, 74.08041237, 85.55855856, 79.2030201…\n\nValidate Data\n\n\n\n\n\n\nThe population value used here is an estimate. If the SISVAN coverage for a municipality exceeds the estimated population, the population value is adjusted to match the coverage.\n\n\n\n\ndata &lt;-\n  data |&gt;\n  mutate(\n    population = case_when(\n      coverage &gt; population ~ coverage,\n      TRUE ~ population\n    )\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 5,540\n#&gt; Columns: 9\n#&gt; $ year              &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ population        &lt;int&gt; 1793, 8132, 401, 6654, 1299, 1177, 602, 1250, 249…\n#&gt; $ coverage          &lt;int&gt; 485, 586, 161, 808, 449, 300, 216, 250, 572, 1014…\n#&gt; $ mean_age          &lt;dbl&gt; 1.6762886598, 1.1040955631, 1.4285714286, 1.16831…\n#&gt; $ mean_weight       &lt;dbl&gt; 13.340250696, 9.711138655, 12.387675926, 10.78976…\n#&gt; $ mean_height       &lt;dbl&gt; 89.86363636, 74.08041237, 85.55855856, 79.2030201…\n\nCalculate Relative Coverage\n\ndata &lt;-\n  data |&gt;\n  mutate(\n    coverage_per = coverage |&gt;\n      divide_by(population) |&gt;\n      multiply_by(100)\n  ) |&gt;\n  relocate(coverage_per, .after = coverage)\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 5,540\n#&gt; Columns: 10\n#&gt; $ year              &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ population        &lt;int&gt; 1793, 8132, 401, 6654, 1299, 1177, 602, 1250, 249…\n#&gt; $ coverage          &lt;int&gt; 485, 586, 161, 808, 449, 300, 216, 250, 572, 1014…\n#&gt; $ coverage_per      &lt;dbl&gt; 27.049637479, 7.206099361, 40.149625935, 12.14307…\n#&gt; $ mean_age          &lt;dbl&gt; 1.6762886598, 1.1040955631, 1.4285714286, 1.16831…\n#&gt; $ mean_weight       &lt;dbl&gt; 13.340250696, 9.711138655, 12.387675926, 10.78976…\n#&gt; $ mean_height       &lt;dbl&gt; 89.86363636, 74.08041237, 85.55855856, 79.2030201…\n\nArrange Data\n\ndata &lt;-\n  data |&gt;\n  arrange(\n    year,\n    region_code,\n    state_code,\n    municipality_code\n  )\n\n\ndata |&gt; glimpse()\n#&gt; Rows: 5,540\n#&gt; Columns: 10\n#&gt; $ year              &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2…\n#&gt; $ region_code       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#&gt; $ state_code        &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1…\n#&gt; $ municipality_code &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100…\n#&gt; $ population        &lt;int&gt; 1793, 8132, 401, 6654, 1299, 1177, 602, 1250, 249…\n#&gt; $ coverage          &lt;int&gt; 485, 586, 161, 808, 449, 300, 216, 250, 572, 1014…\n#&gt; $ coverage_per      &lt;dbl&gt; 27.049637479, 7.206099361, 40.149625935, 12.14307…\n#&gt; $ mean_age          &lt;dbl&gt; 1.6762886598, 1.1040955631, 1.4285714286, 1.16831…\n#&gt; $ mean_weight       &lt;dbl&gt; 13.340250696, 9.711138655, 12.387675926, 10.78976…\n#&gt; $ mean_height       &lt;dbl&gt; 89.86363636, 74.08041237, 85.55855856, 79.2030201…\n\nCheck Relative Coverage by Region\n\n\n\n\n\n\nThe coverage observed here is slightly lower than that reported in Silva et al. (2023, Table 2). This difference may be explained by the use of different data sources (Fundação Oswaldo Cruz (Fiocruz) vs. OpenDataSUS).\n\n\n\ndata |&gt;\n  mutate(\n    region = brazil_region(region_code)\n  ) |&gt;\n  summarize(\n    population = population |&gt; sum(na.rm = TRUE),\n    coverage = coverage |&gt; sum(na.rm = TRUE),\n    .by = \"region\"\n  ) |&gt;\n  slice(c(1, 2, 5, 3, 4)) |&gt;\n  mutate(\n    coverage_per = coverage |&gt;\n      divide_by(population) |&gt;\n      multiply_by(100) |&gt;\n      round(3)\n  ) |&gt;\n  rename(\n    Region = region,\n    Population = population,\n    `SISVAN Coverage` = coverage,\n    `SISVAN Coverage (%)` = coverage_per\n  ) |&gt;\n  pipe_table() |&gt;\n  cat_lines()\n\n\n\n\n\n\n\n\nRegion\nPopulation\nSISVAN Coverage\nSISVAN Coverage (%)\n\n\n\nNorth\n1556158\n488452\n31.388\n\n\nNortheast\n4024684\n1299637\n32.292\n\n\nCentral-West\n1209742\n224429\n18.552\n\n\nSoutheast\n5585825\n1259950\n22.556\n\n\nSouth\n1960536\n459330\n23.429\n\n\nChecking Relative Coverage by State\ndata |&gt;\n  mutate(\n    state = brazil_state(state_code)\n  ) |&gt;\n  summarize(\n    population = population |&gt; sum(na.rm = TRUE),\n    coverage = coverage |&gt; sum(na.rm = TRUE),\n    .by = \"state\"\n  ) |&gt;\n  arrange(state) |&gt;\n  mutate(\n    coverage_per = coverage |&gt;\n      divide_by(population) |&gt;\n      multiply_by(100) |&gt;\n      round(3)\n  ) |&gt;\n  rename(\n    State = state,\n    Population = population,\n    `SISVAN Coverage` = coverage,\n    `SISVAN Coverage (%)` = coverage_per\n  ) |&gt;\n  pipe_table() |&gt;\n  cat_lines()\n\n\n\n\n\n\n\n\nState\nPopulation\nSISVAN Coverage\nSISVAN Coverage (%)\n\n\n\nAcre\n79341\n21602\n27.227\n\n\nAlagoas\n246973\n85974\n34.811\n\n\nAmapá\n77137\n13999\n18.148\n\n\nAmazonas\n387331\n156302\n40.354\n\n\nBahia\n993478\n284507\n28.637\n\n\nCeará\n643821\n204194\n31.716\n\n\nDistrito Federal\n210900\n37246\n17.661\n\n\nEspírito Santo\n276515\n56818\n20.548\n\n\nGoiás\n489321\n77382\n15.814\n\n\nMaranhão\n557488\n198572\n35.619\n\n\nMato Grosso\n290587\n60864\n20.945\n\n\nMato Grosso do Sul\n218934\n48937\n22.352\n\n\nMinas Gerais\n1285644\n464072\n36.096\n\n\nParaná\n772934\n203344\n26.308\n\n\nParaíba\n286431\n115363\n40.276\n\n\nPará\n687576\n225383\n32.779\n\n\nPernambuco\n668885\n231934\n34.675\n\n\nPiauí\n234386\n75117\n32.048\n\n\nRio Grande do Norte\n230391\n68209\n29.606\n\n\nRio Grande do Sul\n685008\n134162\n19.585\n\n\nRio de Janeiro\n1071607\n239717\n22.370\n\n\nRondônia\n133061\n22559\n16.954\n\n\nRoraima\n68500\n14715\n21.482\n\n\nSanta Catarina\n502594\n121824\n24.239\n\n\nSergipe\n162831\n35767\n21.966\n\n\nSão Paulo\n2952059\n499343\n16.915\n\n\nTocantins\n123212\n33892\n27.507"
  },
  {
    "objectID": "index.html#visualize-relative-coverage",
    "href": "index.html#visualize-relative-coverage",
    "title": "",
    "section": "Visualize Relative Coverage",
    "text": "Visualize Relative Coverage\nPlot Histogram of Coverage (%) by Municipality\n\ndata |&gt;\n  drop_na(coverage_per) |&gt;\n  ggplot(aes(x = coverage_per)) +\n  geom_histogram(\n    aes(y = after_stat(density)),\n    bins = 30,\n    fill = get_brand_color(\"gray-d25\"),\n    color = get_brand_color(\"white\")\n  ) +\n  geom_density(\n    color = \"red\",\n    linewidth = 1\n  ) +\n  labs(\n    title = \"SISVAN Coverage by Municipality (%)\",\n    subtitle = paste0(\"Year: \", year),\n    x = \"Coverage (%)\",\n    y = \"Density\",\n    caption = \"Source: SISVAN\"\n  )\n\n\n\n\n\n\n\nPlot Map of Coverage (%) by Municipality\nSet Shape\n\nshape &lt;-\n  read_municipality(\n    year = year |&gt;\n      closest_geobr_year(type = \"municipality\"),\n    showProgress = FALSE\n  ) |&gt;\n  st_transform(st_crs(4326))\n#&gt; Using year/date 2020\n\nPrepare Plot Data\n\nplot_data &lt;-\n  data |&gt;\n  left_join(\n    shape,\n    by = join_by(municipality_code == code_muni)\n  ) |&gt;\n  rename(geometry = geom) |&gt;\n  select(\n    municipality_code,\n    coverage_per,\n    geometry\n  ) |&gt;\n  drop_na(coverage_per)\n\nPlot Data\n\nbrand_div_palette &lt;- function(x) {\n  brandr:::make_color_ramp(\n    n = x,\n    colors = c(\n      get_brand_color(\"dark-red\"),\n      # get_brand_color(\"white\"),\n      get_brand_color_mix(\n        position = 950,\n        color_1 = \"dark-red\",\n        color_2 = \"dark-red-triadic-blue\",\n        alpha = 0.5\n      ),\n      get_brand_color(\"dark-red-triadic-blue\")\n    )\n  )\n}\n\n\nplot_data |&gt;\n  st_as_sf() |&gt;\n  ggplot(aes(fill = coverage_per)) +\n  geom_sf(\n    color = get_brand_color(\"gray\"),\n    linewidth = 0.05\n  ) +\n  scale_fill_binned(\n    breaks = seq(0, 100, 25),\n    limits = c(0, 100),\n    palette = brand_div_palette,\n    na.value = get_brand_color(\"gray-d25\")\n  ) +\n  annotation_scale(\n    aes(),\n    location = \"br\",\n    style = \"tick\",\n    height = unit(0.5, \"lines\")\n  ) +\n  annotation_north_arrow(\n    location = \"br\",\n    height = unit(2, \"lines\"),\n    width = unit(2, \"lines\"),\n    pad_x = unit(0.25, \"lines\"),\n    pad_y = unit(1.25, \"lines\"),\n    style = north_arrow_fancy_orienteering\n  ) +\n  labs(\n    title = \"SISVAN Coverage by Municipality (%)\",\n    subtitle = paste0(\"Year: \", year),\n    fill = NULL,\n    caption = \"Source: SISVAN\"\n  )\n#&gt; Scale on map varies by more than 10%, scale bar may be inaccurate"
  },
  {
    "objectID": "index.html#citation",
    "href": "index.html#citation",
    "title": "",
    "section": "Citation",
    "text": "Citation\n\n\n\n\n\n\nWhen using this data, you must also cite the original data sources.\n\n\n\nTo cite this work, please use the following format:\nVartanian, D., Schettino, J. P. J., & Carvalho, A. M. (2025). A reproducible pipeline for processing SISVAN microdata on nutritional status monitoring in Brazil [Computer software]. Sustentarea Research and Extension Group, University of São Paulo. https://sustentarea.github.io/sisvan-nutritional-status\nA BibLaTeX entry for LaTeX users is:\n@software{vartanian2025,\n  title = {A reproducible pipeline for processing SISVAN microdata on nutritional status monitoring in Brazil},\n  author = {{Daniel Vartanian} and {João Pedro Junqueira Schettino} and {Aline Martins de Carvalho}},\n  year = {2025},\n  address = {São Paulo},\n  institution = {Sustentarea Research and Extension Group, University of São Paulo},\n  langid = {en},\n  url = {https://sustentarea.github.io/sisvan-nutritional-status}\n}"
  },
  {
    "objectID": "index.html#license",
    "href": "index.html#license",
    "title": "",
    "section": "License",
    "text": "License\n \n\n\n\n\n\n\nThe original data sources may be subject to their own licensing terms and conditions.\n\n\n\nThe code in this repository is licensed under the GNU General Public License Version 3, while the report is available under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International.\nCopyright (C) 2025 Sustentarea Research and Extension Group\n\nThe code in this report is free software: you can redistribute it and/or\nmodify it under the terms of the GNU General Public License as published by the\nFree Software Foundation, either version 3 of the License, or (at your option)\nany later version.\n\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE. See the GNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along with\nthis program. If not, see &lt;https://www.gnu.org/licenses/&gt;."
  },
  {
    "objectID": "index.html#acknowledgments",
    "href": "index.html#acknowledgments",
    "title": "",
    "section": "Acknowledgments",
    "text": "Acknowledgments\n\n\n\n\n\nThis work is part of a research project by the (Sustentarea) Research and Extension Group of the University of São Paulo (USP) titled: Global syndemic: The impact of anthropogenic climate change on the health and nutrition of children under five years old attended by Brazil's public health system (SUS).\n\n\n\n\n\n\nThis work was supported by the Department of Science and Technology of the Secretariat of Science, Technology, and Innovation and of the Health Economic-Industrial Complex (SECTICS) of the Ministry of Health of Brazil, and the National Council for Scientific and Technological Development (CNPq) (grant no. 444588/2023-0)."
  },
  {
    "objectID": "index.html#references",
    "href": "index.html#references",
    "title": "",
    "section": "References",
    "text": "References\n\n\nAho, A., Kernighan, B., & Weinberger, P. (2023). The AWK programming language. Addison-Wesley Professional. https://www.awk.dev\n\n\nBagni, U. V., & Barros, D. C. D. (2015). Erro em antropometria aplicada à avaliação nutricional nos serviços de saúde: Causas, consequências e métodos de mensuração. Nutrire, 40(2), 226–236. https://doi.org/10.4322/2316-7874.18613\n\n\nBopp, M., & Faeh, D. (2008). End-digits preference for self-reported height depends on language. BMC Public Health, 8(1), 342. https://doi.org/10.1186/1471-2458-8-342\n\n\nComitê de Gestão de Indicadores, Rede Interagencial de Informações para a Saúde, Coordenação-Geral de Informações e Análises Epidemiológicas, Secretaria de Vigilância em Saúde e Ambiente, Ministério da Saúde, & Instituto Brasileiro de Geografia e Estatística. (n.d.). População residente – Estudo de estimativas populacionais por município, idade e sexo 2000-2024 – Brasil [Resident population – Study of population estimates by municipality, age, and sex, 2000–2024 – Brazil] [Data set]. DATASUS - Tabnet. Retrieved November 16, 2023, from http://tabnet.datasus.gov.br/cgi/deftohtm.exe?ibge/cnv/popsvs2024br.def\n\n\nCorsi, D. J., Perkins, J. M., & Subramanian, S. V. (2017). Child anthropometry data quality from Demographic and Health Surveys, Multiple Indicator Cluster Surveys, and National Nutrition Surveys in the West Central Africa region: Are we comparing apples and oranges? Global Health Action, 10(1), 1328185. https://doi.org/10.1080/16549716.2017.1328185\n\n\nDirk Schumacher. (n.d.-a). anthro: Computation of the WHO child growth standards [Computer software]. https://doi.org/10.32614/CRAN.package.anthro\n\n\nDirk Schumacher. (n.d.-b). anthroplus: Computation of the WHO 2007 references for school-age children and adolescents (5 to 19 years) [Computer software]. https://doi.org/10.32614/CRAN.package.anthroplus\n\n\nFinaret, A. B., & Hutchinson, M. (2018). Missingness of height data from the demographic and health surveys in Africa between 1991 and 2016 was not random but is unlikely to have major implications for biases in estimating stunting prevalence or the determinants of child height. The Journal of Nutrition, 148(5), 781–789. https://doi.org/10.1093/jn/nxy037\n\n\nLawman, H. G., Ogden, C. L., Hassink, S., Mallya, G., Vander Veur, S., & Foster, G. D. (2015). Comparing methods for identifying biologically implausible values in height, weight, and body mass index among youth. American Journal of Epidemiology, 182(4), 359–365. https://doi.org/10.1093/aje/kwv057\n\n\nLyons-Amos, M., & Stones, T. (2017). Trends in demographic and health survey data quality: An analysis of age heaping over time in 34 countries in sub saharan Africa between 1987 and 2015. BMC Research Notes, 10(1), 760. https://doi.org/10.1186/s13104-017-3091-x\n\n\nMei, Z. (2007). Standard deviation of anthropometric Z-scores as a data quality assessment tool using the 2006 WHO growth standards: A cross country analysis. Bulletin of the World Health Organization, 85(6), 441–448. https://doi.org/10.2471/BLT.06.034421\n\n\nMourão, E., Gallo, C. D. O., Nascimento, F. A. D., & Jaime, P. C. (2020). Tendência temporal da cobertura do Sistema de Vigilância Alimentar e Nutricional entre crianças menores de 5 anos da região Norte do Brasil, 2008-2017*. Epidemiologia e Serviços de Saúde, 29(2). https://doi.org/10.5123/S1679-49742020000200026\n\n\nNannan, N., Dorrington, R., & Bradshaw, D. (2019). Estimating completeness of birth registration in South Africa, 1996 – 2011. Bulletin of the World Health Organization, 97(7), 468–476. https://doi.org/10.2471/BLT.18.222620\n\n\nNascimento, F. A. D., Silva, S. A. D., & Jaime, P. C. (2017). Cobertura da avaliação do estado nutricional no Sistema de Vigilância Alimentar e Nutricional brasileiro: 2008 a 2013. Cadernos de Saúde Pública, 33(12). https://doi.org/10.1590/0102-311x00161516\n\n\nPereira, R. H. M., & Goncalves, C. N. (n.d.). geobr: Download official spatial data sets of Brazil [Computer software]. https://doi.org/10.32614/CRAN.package.geobr\n\n\nPerumal, N., Namaste, S., Qamar, H., Aimone, A., Bassani, D. G., & Roth, D. E. (2020). Anthropometric data quality assessment in multisurvey studies of child growth. The American Journal of Clinical Nutrition, 112, 806S–815S. https://doi.org/10.1093/ajcn/nqaa162\n\n\nR Core Team. (n.d.). R: A language and environment for statistical computing [Computer software]. R Foundation for Statistical Computing. https://www.R-project.org\n\n\nSilva, N. de J., Silva, J. F. de M. e, Carrilho, T. R. B., Pinto, E. de J., Andrade, R. da C. S. de, Silva, S. A., Pedroso, J., Spaniol, A. M., Bortolini, G. A., Fagundes, A., Nilson, E. A. F., Fiaccone, R. L., Kac, G., Barreto, M. L., & Ribeiro-Silva, R. de C. (2023). Qualidade dos dados antropométricos infantis do Sisvan, Brasil, 2008-2017. Revista de Saúde Pública, 57(1, 1), 62–62. https://doi.org/10.11606/s1518-8787.2023057004655\n\n\nSistema de Vigilância Alimentar e Nutricional, Coordenação-Geral de Alimentação e Nutrição, Departamento de Promoção da Saúde, Coordenação Setorial de Tecnologia da Informação, Secretaria de Atenção Primária à Saúde, & Ministério da Saúde. (n.d.). Microdados dos acompanhamentos de estado nutricional [Microdata on nutritional status monitoring] [Data set]. openDataSUS. Retrieved November 16, 2023, from https://opendatasus.saude.gov.br/dataset/sisvan-estado-nutricional\n\n\nUshey, K., & Wickham, H. (n.d.). renv: Project environments [Computer software]. https://doi.org/10.32614/CRAN.package.renv\n\n\nVartanian, D., & Carvalho, A. M. de. (2025). A reproducible pipeline for processing WorldClim 2.1 Historical Monthly Weather Data in Brazil [Computer software]. Sustentarea Research; Extension Center at the University of São Paulo. https://sustentarea.github.io/brazil-historical-climate\n\n\nWickham, H. (n.d.-a). The tidyverse style guide. Retrieved July 17, 2023, from https://style.tidyverse.org\n\n\nWickham, H. (n.d.-b). Tidy design principles. https://design.tidyverse.org\n\n\nWickham, H. (2023). The tidy tools manifesto. Tidyverse. https://tidyverse.tidyverse.org/articles/manifesto.html\n\n\nWickham, H., Çetinkaya-Rundel, M., & Grolemund, G. (2023). R for data science: Import, tidy, transform, visualize, and model data (2nd ed.). O’Reilly Media. https://r4ds.hadley.nz\n\n\nWorld Health Organization. (2006). WHO child growth standards: Length/height-for-age, weight-for-age, weight-for-length, weight-for-height and body mass index-for-age: Methods and development. WHO Press. https://www.who.int/tools/child-growth-standards/standards\n\n\nWorld Health Organization. (2008). Training course on child growth assessment. WHO Press. https://www.who.int/publications/i/item/9789241595070"
  }
]